<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="format-detection" content="telephone=no" />
<title>War Multiplayer</title>
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<script src="/socket.io/socket.io.js"></script>
<script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
<script src="config.js"></script>
<script src="game.js"></script>
<style>
  html, body { 
    margin: 0; 
    padding: 0;
    background: #1a1a1a; 
    font-family: 'Arial', sans-serif;
    overflow: hidden;
    width: 100%;
    height: 100%;
  }

  body { 
    margin: 0; 
    background: #1a1a1a; 
    font-family: 'Arial', sans-serif;
  }

  /* Login Screen Styles */
  .login-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('assets/background2.png') center center/cover no-repeat;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
  }

  .login-container {
    background: rgba(0, 0, 0, 0.8);
    border: 2px solid #444;
    border-radius: 20px;
    padding: 40px;
    width: 400px;
    max-width: 90vw;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    text-align: center;
  }

  .login-header h1 {
    color: #fff;
    font-size: 32px;
    margin: 0 0 10px 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .login-header p {
    color: #ccc;
    font-size: 16px;
    margin: 0 0 30px 0;
  }

  .login-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .input-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
    text-align: left;
  }

  .input-group label {
    color: #fff;
    font-size: 14px;
    font-weight: bold;
  }

  .input-group input {
    padding: 12px 16px;
    border: 2px solid #444;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
    font-size: 16px;
    transition: all 0.3s ease;
  }

  .input-group input:focus {
    outline: none;
    border-color: #0077cc;
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 0 10px rgba(0, 119, 204, 0.3);
  }

  .input-group input::placeholder {
    color: #888;
  }

  .login-button {
    padding: 15px 20px;
    border: none;
    border-radius: 10px;
    background: linear-gradient(45deg, #0077cc, #005fa3);
    color: #fff;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin-top: 10px;
  }

  .login-button:hover {
    background: linear-gradient(45deg, #005fa3, #004a82);
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 119, 204, 0.4);
  }

  .login-button:active {
    transform: translateY(0);
  }

  .login-footer {
    margin-top: 30px;
  }

  .login-footer p {
    color: #888;
    font-size: 14px;
    margin: 0;
    margin-bottom: 15px;
  }

  .discord-link {
    display: flex;
    justify-content: center;
  }

  .discord-link a {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #7289da;
    text-decoration: none;
    font-size: 14px;
    font-weight: 600;
    padding: 8px 16px;
    background: rgba(114, 137, 218, 0.1);
    border: 2px solid rgba(114, 137, 218, 0.3);
    border-radius: 20px;
    transition: all 0.3s ease;
  }

  .discord-link a:hover {
    background: rgba(114, 137, 218, 0.2);
    border-color: rgba(114, 137, 218, 0.6);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(114, 137, 218, 0.3);
  }

  .discord-link a:active {
    transform: translateY(0);
  }

  .discord-icon {
    width: 20px;
    height: 20px;
    transition: transform 0.3s ease;
  }

  .discord-link a:hover .discord-icon {
    transform: scale(1.1);
  }

  /* Flag Selector Styles */
  .flag-selector-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
    text-align: left;
    margin-bottom: 10px;
  }

  .flag-selector-container label {
    color: #fff;
    font-size: 14px;
    font-weight: bold;
  }

  .flag-selector {
    display: flex;
    align-items: center;
    gap: 10px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid #444;
    border-radius: 10px;
    padding: 8px;
    transition: all 0.3s ease;
  }

  .flag-selector:hover {
    border-color: #0077cc;
    background: rgba(255, 255, 255, 0.15);
  }

  .flag-nav-btn {
    background: rgba(0, 119, 204, 0.3);
    border: 1px solid #0077cc;
    color: #fff;
    border-radius: 6px;
    padding: 8px 12px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.3s ease;
    min-width: 40px;
  }

  .flag-nav-btn:hover {
    background: rgba(0, 119, 204, 0.5);
    border-color: #005fa3;
    transform: scale(1.05);
  }

  .flag-nav-btn:active {
    transform: scale(0.95);
  }

  .flag-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    flex: 1;
    padding: 8px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 8px;
    min-height: 60px;
    justify-content: center;
  }

  .flag-emoji {
    font-size: 32px;
    line-height: 1;
    transition: transform 0.15s ease;
  }

  .flag-name {
    color: #fff;
    font-size: 12px;
    font-weight: bold;
    text-align: center;
    line-height: 1.2;
  }

  /* Responsive adjustments for login */
  @media (max-width: 768px) {
    .discord-link a {
      padding: 6px 12px;
      font-size: 13px;
    }
    
    .discord-icon {
      width: 18px;
      height: 18px;
    }
    .login-container {
      width: 90vw;
      padding: 30px 20px;
    }
    
    .login-header h1 {
      font-size: 28px;
    }
    
    .login-header p {
      font-size: 14px;
    }
    
    .flag-selector {
      padding: 6px;
    }
    
    .flag-nav-btn {
      padding: 6px 10px;
      font-size: 12px;
      min-width: 35px;
    }
    
    .flag-emoji {
      font-size: 28px;
    }
    
    .flag-name {
      font-size: 11px;
    }
  }

  @media (max-width: 480px) {
    .login-container {
      padding: 25px 15px;
    }
    
    .flag-selector {
      padding: 5px;
      gap: 8px;
    }
    
    .flag-nav-btn {
      padding: 5px 8px;
      font-size: 11px;
      min-width: 30px;
    }
    
    .flag-emoji {
      font-size: 24px;
    }
    
    .flag-name {
      font-size: 10px;
    }
    
    .flag-display {
      min-height: 50px;
      padding: 6px;
    }
  }



  /* Mode Selection Screen Styles */
  .mode-selection-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('assets/background2.png') center center/cover no-repeat;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1500;
  }

  .mode-selection-container {
    background: rgba(0, 0, 0, 0.8);
    border: 2px solid #444;
    border-radius: 20px;
    padding: 40px;
    width: 600px;
    max-width: 90vw;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    text-align: center;
  }

  .mode-selection-header h1 {
    color: #fff;
    font-size: 32px;
    margin: 0 0 10px 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .mode-selection-header p {
    color: #ccc;
    font-size: 16px;
    margin: 0 0 30px 0;
  }

  .mode-options {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 30px;
  }

  .mode-option {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 20px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid #444;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: left;
  }

  .mode-option:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: #0077cc;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 119, 204, 0.3);
  }

  .mode-option.disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .mode-option.disabled:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: #444;
    transform: none;
    box-shadow: none;
  }

  .mode-icon {
    font-size: 48px;
    min-width: 60px;
    text-align: center;
  }

  .mode-content {
    flex: 1;
  }

  .mode-content h3 {
    color: #fff;
    font-size: 24px;
    margin: 0 0 8px 0;
  }

  .mode-content p {
    color: #ccc;
    font-size: 14px;
    margin: 0 0 10px 0;
    line-height: 1.4;
  }

  .mode-status {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
  }

  .mode-status.available {
    background: #0077cc;
    color: white;
  }

  .mode-status.unavailable {
    background: #666;
    color: #ccc;
  }

  .mode-selection-footer {
    border-top: 1px solid #444;
    padding-top: 20px;
  }

  .back-button {
    padding: 12px 24px;
    border: 2px solid #444;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.1);
    color: #ccc;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .back-button:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: #666;
    color: #fff;
  }

  /* Skirmish Mode Screen Styles */
  .skirmish-mode-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('assets/background2.png') center center/cover no-repeat;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1500;
  }

  .skirmish-mode-container {
    background: rgba(0, 0, 0, 0.8);
    border: 2px solid #444;
    border-radius: 20px;
    padding: 30px;
    width: 700px;
    max-width: 95vw;
    max-height: 95vh;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    text-align: center;
    overflow-y: hidden;
    /* Ajuste para evitar scroll desnecessário */
    display: flex;
    flex-direction: column;
    justify-content: center;
    gap: 20px;
  }

  /* Ajustes para notebooks e telas menores */
  @media (max-width: 1024px) {
    .skirmish-mode-container {
      width: 650px;
      padding: 25px;
      max-height: 95vh;
      overflow-y: hidden;
    }
  }

  /* Ajustes específicos para notebooks com resolução 1366px */
  @media (max-width: 1366px) and (min-width: 1025px) {
    .skirmish-mode-container {
      width: 680px;
      padding: 28px;
      max-height: 95vh;
      overflow-y: hidden;
    }
    
    .skirmish-options {
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 16px;
    }
  }

  .skirmish-mode-header h1 {
    color: #fff;
    font-size: 28px;
    margin: 0 0 8px 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .skirmish-mode-header p {
    color: #ccc;
    font-size: 15px;
    margin: 0 0 20px 0;
  }

  /* Ajustes para notebooks e telas menores */
  @media (max-width: 1024px) {
    .skirmish-mode-header h1 {
      font-size: 26px;
      margin: 0 0 6px 0;
    }
    
    .skirmish-mode-header p {
      font-size: 14px;
      margin: 0 0 18px 0;
    }
  }

  .skirmish-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 18px;
    margin-bottom: 20px;
    /* Ajuste para melhor distribuição do espaço */
    flex: 1;
    align-content: center;
    justify-content: center;
  }

  /* Ajustes para notebooks e telas menores */
  @media (max-width: 1024px) {
    .skirmish-options {
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-bottom: 15px;
    }
  }

  .skirmish-option {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding: 20px 16px;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid #444;
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
    min-height: 160px;
  }

  /* Ajustes para notebooks e telas menores */
  @media (max-width: 1024px) {
    .skirmish-option {
      padding: 18px 14px;
      min-height: 145px;
      gap: 10px;
    }
  }

  .skirmish-option:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: #0077cc;
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 119, 204, 0.3);
  }

  .skirmish-option-icon {
    font-size: 48px;
    margin-bottom: 10px;
  }

  .skirmish-option-content h3 {
    color: #fff;
    font-size: 20px;
    margin: 0 0 8px 0;
  }

  .skirmish-option-content p {
    color: #ccc;
    font-size: 14px;
    margin: 0 0 15px 0;
    line-height: 1.4;
  }

  /* Ajustes para notebooks e telas menores */
  @media (max-width: 1024px) {
    .skirmish-option-icon {
      font-size: 42px;
      margin-bottom: 8px;
    }
    
    .skirmish-option-content h3 {
      font-size: 18px;
      margin: 0 0 6px 0;
    }
    
    .skirmish-option-content p {
      font-size: 13px;
      margin: 0 0 12px 0;
    }
  }

  .skirmish-option-status {
    display: inline-block;
    padding: 6px 16px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    text-transform: uppercase;
    background: #0077cc;
    color: white;
  }

  /* Ajustes para notebooks e telas menores */
  @media (max-width: 1024px) {
    .skirmish-option-status {
      padding: 5px 12px;
      font-size: 11px;
    }
  }

  /* Estilo para opções indisponíveis */
  .skirmish-option-disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background: rgba(255, 255, 255, 0.05);
    border-color: #666;
  }

  .skirmish-option-disabled:hover {
    background: rgba(255, 255, 255, 0.05);
    border-color: #666;
    transform: none;
    box-shadow: none;
  }

  .skirmish-option-disabled .skirmish-option-status {
    background: #666;
    color: #ccc;
  }

  .skirmish-option-disabled .skirmish-option-content h3 {
    color: #999;
  }

  .skirmish-option-disabled .skirmish-option-content p {
    color: #777;
  }

  .skirmish-option-disabled .skirmish-option-icon {
    opacity: 0.7;
  }

  .skirmish-mode-footer {
    padding-top: 10px;
  }

  /* Ajustes para notebooks e telas menores */
  @media (max-width: 1024px) {
    .skirmish-mode-footer {
      padding-top: 8px;
    }
  }

  /* Responsive adjustments for skirmish mode */
  @media (max-width: 768px) {
    .skirmish-mode-container {
      width: 90vw;
      padding: 25px 18px;
      max-height: 98vh;
      overflow-y: auto;
    }
    
    .skirmish-options {
      grid-template-columns: 1fr;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .skirmish-option {
      min-height: 140px;
      padding: 18px 14px;
    }
    
    .skirmish-mode-header h1 {
      font-size: 26px;
    }
  }

  @media (max-width: 480px) {
    .skirmish-mode-container {
      padding: 22px 12px;
      width: 95vw;
      max-height: 98vh;
      overflow-y: auto;
    }
    
    .skirmish-option {
      min-height: 125px;
      padding: 14px 10px;
    }
    
    .skirmish-option-icon {
      font-size: 34px;
    }
    
    .skirmish-option-content h3 {
      font-size: 17px;
    }
    
    .skirmish-option-content p {
      font-size: 12px;
    }
    
    /* Ajustes para botões indisponíveis em mobile */
    .skirmish-option-disabled .skirmish-option-status {
      font-size: 10px;
      padding: 4px 10px;
    }
  }

  @media (max-width: 360px) {
    .skirmish-mode-container {
      padding: 18px 8px;
      width: 98vw;
      max-height: 98vh;
      overflow-y: auto;
    }
    
    .skirmish-option {
      min-height: 115px;
      padding: 12px 8px;
    }
    
    .skirmish-option-icon {
      font-size: 32px;
    }
    
    .skirmish-option-content h3 {
      font-size: 16px;
    }
    
    .skirmish-option-content p {
      font-size: 12px;
    }
    
    .skirmish-option-status {
      font-size: 9px;
      padding: 3px 10px;
    }
  }

  /* Tutorial Screen Styles */
  .tutorial-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('assets/background2.png') center center/cover no-repeat;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1600;
    overflow-y: auto;
  }

  .tutorial-container {
    background: rgba(0, 0, 0, 0.9);
    border: 2px solid #0077cc;
    border-radius: 20px;
    padding: 40px;
    width: 800px;
    max-width: 95vw;
    max-height: 90vh;
    backdrop-filter: blur(15px);
    box-shadow: 0 15px 40px rgba(0, 119, 204, 0.4);
    text-align: center;
    overflow-y: auto;
  }

  .tutorial-header h1 {
    color: #fff;
    font-size: 36px;
    margin: 0 0 15px 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .tutorial-header p {
    color: #ccc;
    font-size: 18px;
    margin: 0 0 40px 0;
    line-height: 1.5;
  }

  .tutorial-content {
    margin-bottom: 40px;
  }

  .tutorial-section {
    text-align: left;
  }

  .tutorial-section-header h2 {
    color: #0077cc;
    font-size: 28px;
    margin: 0 0 25px 0;
    text-align: center;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .tutorial-section-content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 30px;
    align-items: start;
  }

  .tutorial-text {
    color: #fff;
    line-height: 1.6;
  }

  .tutorial-text p {
    margin: 0 0 20px 0;
    font-size: 16px;
  }

  .tutorial-text ul, .tutorial-text ol {
    margin: 0 0 20px 0;
    padding-left: 25px;
  }

  .tutorial-text li {
    margin: 0 0 12px 0;
    font-size: 15px;
  }

  .tutorial-text strong {
    color: #0077cc;
  }

  .tutorial-text em {
    color: #ffcc00;
    font-style: italic;
  }

  .tutorial-image {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 200px;
  }

  .tutorial-placeholder {
    font-size: 120px;
    opacity: 0.7;
    color: #0077cc;
  }

  .tutorial-navigation {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 30px;
    padding: 20px 0;
    border-top: 1px solid #444;
    border-bottom: 1px solid #444;
  }

  .tutorial-nav-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid #444;
    color: #fff;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    transition: all 0.3s ease;
    min-width: 120px;
  }

  .tutorial-nav-btn:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.2);
    border-color: #0077cc;
    transform: translateY(-2px);
  }

  .tutorial-nav-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .tutorial-dots {
    display: flex;
    gap: 8px;
  }

  .tutorial-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .tutorial-dot:hover {
    background: rgba(255, 255, 255, 0.5);
  }

  .tutorial-dot.active {
    background: #0077cc;
    transform: scale(1.2);
  }

  .tutorial-actions {
    display: flex;
    gap: 20px;
    justify-content: center;
  }

  .tutorial-btn {
    padding: 15px 30px;
    border-radius: 25px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
    min-width: 180px;
  }

  .tutorial-btn.primary {
    background: linear-gradient(135deg, #0077cc, #0055aa);
    color: white;
    box-shadow: 0 4px 15px rgba(0, 119, 204, 0.4);
  }

  .tutorial-btn.primary:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 25px rgba(0, 119, 204, 0.6);
  }

  .tutorial-btn.secondary {
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid #444;
    color: #ccc;
  }

  .tutorial-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: #0077cc;
    color: #fff;
    transform: translateY(-2px);
  }

  /* Responsive adjustments for tutorial */
  @media (max-width: 768px) {
    .tutorial-container {
      width: 95vw;
      padding: 30px 20px;
      max-height: 95vh;
    }
    
    .tutorial-section-content {
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .tutorial-header h1 {
      font-size: 28px;
    }
    
    .tutorial-header p {
      font-size: 16px;
    }
    
    .tutorial-section-header h2 {
      font-size: 24px;
    }
    
    .tutorial-navigation {
      flex-direction: column;
      gap: 20px;
    }
    
    .tutorial-actions {
      flex-direction: column;
      align-items: center;
    }
    
    .tutorial-btn {
      min-width: 200px;
    }
  }

  @media (max-width: 480px) {
    .tutorial-container {
      padding: 25px 15px;
    }
    
    .tutorial-header h1 {
      font-size: 24px;
    }
    
    .tutorial-header p {
      font-size: 14px;
    }
    
    .tutorial-section-header h2 {
      font-size: 20px;
    }
    
    .tutorial-text p {
      font-size: 14px;
    }
    
    .tutorial-text li {
      font-size: 13px;
    }
    
    .tutorial-placeholder {
      font-size: 80px;
    }
  }

  /* Scrollbar styling for tutorial screen */
  .tutorial-screen::-webkit-scrollbar {
    width: 8px;
  }
  
  .tutorial-screen::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }
  
  .tutorial-screen::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
  }
  
  .tutorial-screen::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
  }
  
  /* Firefox scrollbar styling for tutorial screen */
  .tutorial-screen {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
  }

  /* Scrollbar styling for tutorial container */
  .tutorial-container::-webkit-scrollbar {
    width: 8px;
  }
  
  .tutorial-container::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }
  
  .tutorial-container::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
  }
  
  .tutorial-container::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
  }
  
  /* Firefox scrollbar styling for tutorial container */
  .tutorial-container {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
  }

  /* Lobby Screen Styles */
  .lobby-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('assets/background2.png') center center/cover no-repeat;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1400;
  }

  .lobby-container {
    background: rgba(0, 0, 0, 0.8);
    border: 2px solid #444;
    border-radius: 20px;
    padding: 40px;
    width: 600px;
    max-width: 90vw;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    text-align: center;
  }

  .lobby-header h1 {
    color: #fff;
    font-size: 28px;
    margin: 0 0 10px 0;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .lobby-header p {
    color: #ccc;
    font-size: 16px;
    margin: 0 0 30px 0;
  }

  .lobby-timer {
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid #0077cc;
    border-radius: 15px;
    padding: 20px;
    margin: 20px 0;
  }

  .lobby-timer-label {
    color: #fff;
    font-size: 14px;
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .lobby-timer-display {
    color: #0077cc;
    font-size: 36px;
    font-weight: bold;
    font-family: 'Courier New', monospace;
    text-shadow: 0 0 10px rgba(0, 119, 204, 0.5);
  }

  .lobby-timer.warning .lobby-timer-display {
    color: #ffaa00;
    text-shadow: 0 0 10px rgba(255, 170, 0, 0.5);
  }

  .lobby-timer.danger .lobby-timer-display {
    color: #ff4444;
    text-shadow: 0 0 10px rgba(255, 68, 68, 0.5);
    animation: pulse 1s infinite;
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }

  .lobby-players {
    margin: 30px 0;
  }

  .lobby-players-title {
    color: #fff;
    font-size: 18px;
    margin-bottom: 15px;
    font-weight: bold;
  }

  .lobby-players-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-height: 200px;
    overflow-y: auto;
  }

  .lobby-player {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 10px 15px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .lobby-player-avatar {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: linear-gradient(45deg, #4a90e2, #357abd);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    border: 2px solid #fff;
  }

  .lobby-player-name {
    color: #fff;
    font-size: 16px;
    font-weight: bold;
  }

  .lobby-player-status {
    color: #00ff00;
    font-size: 12px;
    margin-left: auto;
  }

  /* Scrollbar styling for lobby players list */
  .lobby-players-list::-webkit-scrollbar {
    width: 10px;
  }

  .lobby-players-list::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
  }

  .lobby-players-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 5px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .lobby-players-list::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
  }

  /* Firefox scrollbar styling */
  .lobby-players-list {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
  }

  /* Responsive adjustments for lobby scrollbar */
  @media (max-width: 768px) {
    .lobby-players-list::-webkit-scrollbar {
      width: 8px;
    }
    .lobby-players-list {
      scrollbar-width: thin;
    }
  }

  @media (max-width: 480px) {
    .lobby-players-list::-webkit-scrollbar {
      width: 6px;
    }
    .lobby-players-list {
      max-height: 150px;
    }
  }

  .lobby-player-status.connecting {
    color: #ffaa00;
  }

  .lobby-player-status.cpu {
    color: #888;
  }

  .lobby-status {
    margin: 20px 0;
    padding: 15px;
    background: rgba(0, 119, 204, 0.2);
    border-radius: 10px;
    border: 1px solid rgba(0, 119, 204, 0.3);
  }

  .lobby-status-text {
    color: #fff;
    font-size: 16px;
    margin: 0;
  }

  .lobby-footer {
    margin-top: 30px;
  }

  .lobby-footer p {
    color: #888;
    font-size: 14px;
    margin: 0;
  }

  /* Game Container */
  .game-container {
    width: 100%;
    height: 100vh;
    position: relative;
    overflow: hidden;
    padding-top: 0; /* Remove padding, canvas will be positioned absolutely */
  }
  
  /* Ensure Phaser canvas is visible */
  .game-container canvas {
    position: absolute !important;
    top: 45px !important; /* Position below HUD */
    left: 0 !important;
    margin-top: 0 !important;
    margin-left: 0 !important;
    z-index: 1 !important;
    display: block !important;
    visibility: visible !important;
    width: 100% !important;
    height: calc(100vh - 45px) !important; /* Use viewport height minus HUD */
    object-fit: cover !important; /* Fill entire area while maintaining aspect ratio */
    image-rendering: -webkit-optimize-contrast !important;
    image-rendering: optimize-contrast !important;
    image-rendering: pixelated !important;
  }

  /* Mobile-specific canvas adjustments */
  @media (max-width: 768px) {
    .game-container {
      height: 100vh;
      width: 100vw;
      padding-top: 0; /* Remove padding, canvas will be positioned absolutely */
    }
    
    .game-container canvas {
      width: 100% !important;
      height: calc(100vh - 25px) !important; /* Use viewport height minus mobile HUD */
      top: 25px !important; /* Position below mobile HUD */
      object-fit: fill !important; /* Stretch to fill entire area */
    }
  }

  /* Mobile portrait specific adjustments */
  @media (max-width: 768px) and (orientation: portrait) {
    .game-container canvas {
      height: calc(100vh - 28px - env(safe-area-inset-top)) !important; /* Account for safe area */
      top: calc(28px + env(safe-area-inset-top)) !important; /* Position below HUD and safe area */
    }
  }

  /* Extra mobile adjustments to eliminate top spacing */
  @media (max-width: 768px) {
    .game-container {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      height: 100vh !important;
      width: 100vw !important;
    }
    
    .game-container canvas {
      position: absolute !important;
      top: 28px !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100% !important;
      height: calc(100vh - 28px) !important;
      object-fit: fill !important;
    }
  }

  /* Force mobile canvas to start immediately after HUD */
  @media (max-width: 768px) {
    .game-container canvas {
      top: -10 !important;
      height: 100vh !important;
      margin-top: 28px !important;
    }
  }

  /* iPhone-specific adjustments */
  @supports (-webkit-touch-callout: none) {
    .game-container {
      height: 100vh;
      width: 100vw;
      position: fixed;
      top: 0;
      left: 0;
      overflow: hidden;
      padding-top: 0; /* Remove padding, canvas will be positioned absolutely */
    }
    
    .game-container canvas {
      width: 100% !important;
      height: calc(100vh - 28px - env(safe-area-inset-top)) !important; /* Use viewport height minus HUD and safe area on iPhone */
      top: calc(28px + env(safe-area-inset-top)) !important; /* Position below HUD and safe area on iPhone */
      object-fit: fill !important; /* Stretch to fill entire area */
      touch-action: none;
      -webkit-user-select: none;
      user-select: none;
      -webkit-touch-callout: none;
    }
  }

  /* iPhone Landscape Specific */
  @supports (-webkit-touch-callout: none) {
    @media (orientation: landscape) and (max-height: 500px) {
      .game-container {
        padding-top: 0 !important;
      }
      
      .game-container canvas {
        top: 26px !important;
        width: 100% !important;
        height: calc(100vh - 26px) !important;
        object-fit: fill !important;
      }
      
      .hud-top {
        height: 26px !important;
      }
    }
    
    @media (orientation: landscape) and (max-height: 400px) {
      .game-container {
        padding-top: 0 !important;
      }
      
      .game-container canvas {
        top: 22px !important;
        width: 100% !important;
        height: calc(100vh - 22px) !important;
        object-fit: fill !important;
      }
      
      .hud-top {
        height: 22px !important;
      }
    }
  }

  /* Prevent zoom and scroll on mobile */
  @media (max-width: 768px) {
    * {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -khtml-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    input, textarea {
      -webkit-user-select: text;
      -khtml-user-select: text;
      -moz-user-select: text;
      -ms-user-select: text;
      user-select: text;
    }
  }

  /* Modern HUD Container */
  .game-hud {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;
    z-index: 10;
  }

  /* Top HUD Bar */
  .hud-top {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 45px;
    background: linear-gradient(180deg, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 100%);
    border-bottom: 1px solid #444;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 15px;
    pointer-events: auto;
    z-index: 100;
  }

  /* Player Info Section */
  .player-info {
    display: flex;
    align-items: center;
    gap: 10px;
    color: white;
  }

  .player-avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: linear-gradient(45deg, #4a90e2, #357abd);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    border: 1px solid #fff;
  }

  .player-details {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  /* Game Instructions Section */
  .game-instructions {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 1;
    margin: 0 20px;
  }

  .instruction-text {
    color: #ffffff;
    font-size: 14px;
    font-weight: 500;
    text-align: center;
    padding: 8px 16px;
    background: rgba(74, 144, 226, 0.2);
    border: 1px solid rgba(74, 144, 226, 0.4);
    border-radius: 20px;
    white-space: normal; /* Allow text to wrap */
    overflow: visible; /* Show full text */
    text-overflow: clip; /* Remove ellipsis */
    max-width: none; /* Remove fixed max-width to allow growth */
    transition: all 0.3s ease;
    min-width: 0; /* Allow element to shrink */
    flex-shrink: 1; /* Allow shrinking in flex container */
    word-wrap: break-word; /* Break long words if necessary */
    line-height: 1.3; /* Better line height for wrapped text */
  }

  .instruction-text.highlight {
    background: rgba(74, 144, 226, 0.4);
    border-color: rgba(74, 144, 226, 0.8);
    box-shadow: 0 0 10px rgba(74, 144, 226, 0.3);
  }

  .player-name {
    font-size: 14px;
    font-weight: bold;
    color: #fff;
  }

  .player-stats {
    font-size: 11px;
    color: #ccc;
  }

  /* Turn Indicator Section - Bottom Left */
  .turn-indicator {
    position: fixed;
    bottom: 5vh;
    left: 2vw;
    width: min(140px, 12vw);
    height: min(140px, 12vw);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1001;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .turn-indicator:hover {
    transform: scale(1.05);
  }

  .turn-indicator:active {
    transform: scale(0.95);
  }

  .turn-circle {
    position: relative;
    width: min(120px, 10vw);
    height: min(120px, 10vw);
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.8);
    border: 3px solid rgba(255, 255, 255, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: min(18px, 1.5vw);
    font-weight: bold;
    text-align: center;
    line-height: 1.2;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
  }

  .turn-marks {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
  }

  .turn-mark {
    position: absolute;
    width: min(5px, 0.4vw);
    height: min(25px, 2vw);
    background: currentColor;
    border-radius: min(3px, 0.25vw);
    transform-origin: 50% min(60px, 5vw);
    top: 0;
    left: 50%;
    margin-left: min(-2.5px, -0.2vw);
  }

  .turn-mark.vermelho { color: #ff4444; }
  .turn-mark.azul { color: #4444ff; }
  .turn-mark.verde { color: #44ff44; }
  .turn-mark.amarelo { color: #ffff44; }
  .turn-mark.preto { color: #444444; }
  .turn-mark.roxo { color: #ff44ff; }

  .turn-text {
    position: absolute;
    bottom: min(-35px, -3vw);
    left: 50%;
    transform: translateX(-50%);
    color: white;
    font-size: min(14px, 1.2vw);
    font-weight: bold;
    text-align: center;
    white-space: nowrap;
    max-width: min(200px, 15vw);
    overflow: hidden;
    text-overflow: ellipsis;
  }

  /* Global Turn Timer - Top HUD */
  .global-turn-timer {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    color: white;
    font-family: 'Courier New', monospace;
    margin: 0 15px; /* Espaçamento base para desktop */
  }

  /* Responsivo para diferentes tamanhos de tela */
  @media (max-width: 768px) {
    .global-turn-timer {
      margin: 0 12px; /* Menor espaçamento para tablets */
    }
  }

  @media (max-width: 480px) {
    .global-turn-timer {
      margin: 0 8px; /* Espaçamento mínimo para mobile */
    }
  }

  .timer-label {
    font-size: 12px;
    color: #ccc;
    font-weight: normal;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .timer-display {
    font-size: 20px;
    font-weight: bold;
    color: white;
    background: rgba(0, 0, 0, 0.6);
    padding: 4px 10px;
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    min-width: 70px;
    text-align: center;
    transition: all 0.3s ease;
  }

  .timer-display.warning {
    color: #ffaa00;
    border-color: #ffaa00;
    animation: pulse 1s infinite;
  }

  .timer-display.danger {
    color: #ff4444;
    border-color: #ff4444;
    animation: pulse 0.5s infinite;
  }





  @keyframes pulse {
    0% { opacity: 1; }
    50% { opacity: 0.7; }
    100% { opacity: 1; }
  }

  .turn-pointer {
    position: absolute;
    width: 0;
    height: 0;
    border-left: min(12px, 1vw) solid transparent;
    border-right: min(12px, 1vw) solid transparent;
    border-bottom: min(25px, 2vw) solid currentColor;
    transform-origin: 50% min(60px, 5vw);
    top: min(-8px, -0.7vw);
    left: 50%;
    margin-left: min(-12px, -1vw);
    z-index: 2;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
  }

  .turn-pointer.vermelho { color: #ffffff; }
  .turn-pointer.azul { color: #ffffff; }
  .turn-pointer.verde { color: #ffffff; }
  .turn-pointer.amarelo { color: #ffffff; }
  .turn-pointer.preto { color: #ffffff; }
  .turn-pointer.roxo { color: #ffffff; }

  /* Action Buttons */
  .action-buttons {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .hud-button {
    padding: 4px 10px;
    border: none;
    border-radius: 12px;
    color: white;
    font-size: 12px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 4px;
    pointer-events: auto;
    position: relative;
  }

  .hud-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }

  .btn-objective {
    background: linear-gradient(45deg, #9933cc, #7a2a9e);
  }

  .btn-objective:hover {
    background: linear-gradient(45deg, #7a2a9e, #5f1f7a);
  }

  .btn-cards {
    background: linear-gradient(45deg, #cc6633, #a55229);
  }

  .btn-cards:hover {
    background: linear-gradient(45deg, #a55229, #8a4422);
  }

  .btn-turn {
    background: linear-gradient(45deg, #0077cc, #005fa3);
  }

  .btn-turn:hover {
    background: linear-gradient(45deg, #005fa3, #004a82);
  }

  .btn-history {
    background: linear-gradient(45deg, #666666, #444444);
  }

  .btn-history:hover {
    background: linear-gradient(45deg, #444444, #333333);
  }

  .hud-button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
  }

  .hud-button:disabled:hover {
    transform: none !important;
    box-shadow: none !important;
  }

  /* Game Info */
  .game-info {
    display: flex;
    align-items: center;
    gap: 20px;
    color: white;
  }

  .info-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
  }

  .info-icon {
    font-size: 16px;
  }

  /* Continent Status */
  .continent-status {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .continent-item {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 4px 8px;
    background: rgba(255,255,255,0.1);
    border-radius: 12px;
    font-size: 12px;
    color: white;
  }



  /* Additional styling for better visual appeal */
  .hud-top, .hud-bottom {
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 20px rgba(0,0,0,0.3);
  }

  .phase-indicator {
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }

  .continent-item {
    box-shadow: 0 1px 4px rgba(0,0,0,0.2);
    transition: all 0.2s ease;
  }

  .continent-item:hover {
    background: rgba(255,255,255,0.2);
    transform: translateY(-1px);
  }

  /* Responsive Design */
  @media (max-width: 1200px) {
    .hud-top {
      height: 70px;
      padding: 0 15px;
    }
    
    .player-name {
      font-size: 16px;
    }
    
    .phase-indicator {
      padding: 6px 12px;
      font-size: 12px;
    }
    
    .hud-button {
      padding: 6px 12px;
      font-size: 12px;
    }
  }

  @media (max-width: 768px) {
    .game-phase {
      gap: 10px;
    }
    
    .action-buttons {
      gap: 5px;
    }
    
    .continent-status {
      display: none;
    }
    
    .game-instructions {
      margin: 0 10px;
    }
    
    .instruction-text {
      font-size: 12px;
      padding: 6px 12px;
      max-width: none; /* Remove fixed max-width to allow text to grow */
      white-space: normal; /* Allow text to wrap */
      overflow: visible; /* Show full text */
      text-overflow: clip; /* Remove ellipsis */
      word-wrap: break-word; /* Break long words if necessary */
    }
  }

  /* History Popup Styles */
  .history-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(600px, 90vw);
    height: min(400px, 70vh);
    background: rgba(0, 0, 0, 0.95);
    border: 2px solid #444;
    border-radius: 15px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    box-sizing: border-box;
  }

  /* Objective Popup Styles */
  .objective-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(520px, 92vw);
    background: rgba(0, 0, 0, 0.95);
    border: 2px solid #444;
    border-radius: 15px;
    z-index: 1002;
    display: none;
    flex-direction: column;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    box-sizing: border-box;
  }

  .objective-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 1001;
    display: none;
  }

  .objective-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    border-bottom: 1px solid #444;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 13px 13px 0 0;
  }

  .objective-header h3 {
    margin: 0;
    color: white;
    font-size: 18px;
    font-weight: bold;
  }

  .objective-close {
    background: none;
    border: none;
    color: #ccc;
    font-size: 18px;
    cursor: pointer;
    padding: 6px;
    border-radius: 6px;
    transition: all 0.2s ease;
  }

  .objective-close:hover {
    background: rgba(255, 255, 255, 0.1);
    color: #fff;
  }

  .objective-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding: 18px;
  }

  .objective-icon {
    font-size: 40px;
  }

  .objective-description {
    color: #ffffff;
    font-size: 16px;
    text-align: center;
    line-height: 1.4;
  }

  .objective-hint {
    color: #cccccc;
    font-size: 13px;
    text-align: center;
    font-style: italic;
    margin-top: 4px;
  }

  .objective-actions {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    width: 100%;
  }

  .objective-ok {
    padding: 10px 18px;
    background: #0077cc;
    border: none;
    border-radius: 8px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .objective-ok:hover { background: #005fa3; }

  @media (max-width: 480px) {
    .objective-popup { width: 85vw; }
    .objective-icon { font-size: 32px; }
    .objective-description { font-size: 14px; }
  }

  /* Cards Popup Styles */
  .cards-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(820px, 95vw);
    max-height: min(80vh, 700px);
    background: rgba(0, 0, 0, 0.95);
    border: 2px solid #444;
    border-radius: 15px;
    z-index: 1002;
    display: none;
    flex-direction: column;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    box-sizing: border-box;
  }

  .cards-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 1001;
    display: none;
  }

  .cards-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 18px;
    border-bottom: 1px solid #444;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 13px 13px 0 0;
  }

  .cards-header h3 {
    margin: 0;
    color: white;
    font-size: 18px;
    font-weight: bold;
  }

  .cards-close {
    background: none;
    border: none;
    color: #ccc;
    font-size: 18px;
    cursor: pointer;
    padding: 6px;
    border-radius: 6px;
    transition: all 0.2s ease;
  }

  .cards-close:hover { background: rgba(255, 255, 255, 0.1); color: #fff; }

  .cards-content {
    padding: 16px 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    overflow-y: auto;
  }

  .cards-instructions {
    color: #ccc;
    font-size: 14px;
    text-align: center;
  }

  .cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 12px;
    justify-items: center; /* centraliza o item dentro da célula */
    justify-content: center; /* centraliza a grade quando sobra espaço */
  }

  .card-item {
    background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 12px;
    padding: 8px 10px;
    color: white;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
    box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  }

  .card-item:hover { transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,0.35); }
  .card-item.selected { border-color: #ffaa00; box-shadow: 0 0 12px rgba(255, 170, 0, 0.5), 0 6px 14px rgba(0,0,0,0.35); }

  .card-header { width: 100%; display: flex; justify-content: flex-end; }
  .card-symbol { font-size: 22px; opacity: 0.9; }
  .card-figure { width: 100%; height: 86px; display: flex; align-items: center; justify-content: center; }
  .card-name { font-size: 12px; text-align: center; color: #ddd; margin-top: 2px; }

  .cards-actions { display: flex; justify-content: center; gap: 10px; margin-top: 4px; }
  .cards-exchange {
    padding: 10px 18px;
    background: #0077cc;
    border: none;
    border-radius: 8px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
  }
  .cards-exchange:disabled { background: #444; cursor: not-allowed; }
  .cards-exchange:hover:not(:disabled) { background: #005fa3; }

  @media (max-width: 480px) {
    .cards-popup { width: 92vw; }
    .cards-grid { grid-template-columns: repeat(2, minmax(140px, 1fr)); justify-items: center; justify-content: center; }
  }

  /* Victory Popup Styles */
  .victory-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(800px, 95vw);
    max-height: min(90vh, 900px);
    background: rgba(0, 0, 0, 0.95);
    border: 3px solid #0077cc;
    border-radius: 15px;
    z-index: 1002;
    display: none;
    flex-direction: column;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    box-sizing: border-box;
  }

  .victory-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 1001;
    display: none;
  }

  .victory-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 16px 20px;
    border-bottom: 2px solid #0077cc;
    background: linear-gradient(135deg, rgba(0,119,204,0.3), rgba(0,119,204,0.1));
    border-radius: 12px 12px 0 0;
  }

  .victory-header h3 {
    margin: 0;
    color: white;
    font-size: 20px;
    font-weight: bold;
  }

  .victory-close {
    background: none;
    border: none;
    color: #ccc;
    font-size: 18px;
    cursor: pointer;
    padding: 6px;
    border-radius: 6px;
    transition: all 0.2s ease;
  }
  .victory-close:hover { background: rgba(255, 255, 255, 0.1); color: #fff; }

  .victory-content { 
    padding: 20px; 
    display: flex; 
    flex-direction: column; 
    gap: 20px; 
    overflow-y: auto; 
    max-height: calc(90vh - 120px);
  }

  /* Scrollbar styling for victory content */
  .victory-content::-webkit-scrollbar {
    width: 8px;
  }
  
  .victory-content::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }
  
  .victory-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
  }
  
  .victory-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
  }
  
  /* Firefox scrollbar styling */
  .victory-content {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
  }

  /* Scrollbar styling for other victory elements that might have scroll */
  .players-grid::-webkit-scrollbar,
  .objectives-list::-webkit-scrollbar,
  .game-stats::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }
  
  .players-grid::-webkit-scrollbar-track,
  .objectives-list::-webkit-scrollbar-track,
  .game-stats::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }
  
  .players-grid::-webkit-scrollbar-thumb,
  .objectives-list::-webkit-scrollbar-thumb,
  .game-stats::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
  }
  
  .players-grid::-webkit-scrollbar-thumb:hover,
  .objectives-list::-webkit-scrollbar-thumb:hover,
  .game-stats::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
  }
  
  /* Firefox scrollbar styling for other elements */
  .players-grid,
  .objectives-list,
  .game-stats {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
  }

  /* Horizontal scrollbar styling for elements that might need it */
  .players-grid::-webkit-scrollbar:horizontal,
  .objectives-list::-webkit-scrollbar:horizontal,
  .game-stats::-webkit-scrollbar:horizontal {
    height: 8px;
  }
  
  .players-grid::-webkit-scrollbar-track:horizontal,
  .objectives-list::-webkit-scrollbar-track:horizontal,
  .game-stats::-webkit-scrollbar-track:horizontal {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 4px;
  }
  
  .players-grid::-webkit-scrollbar-thumb:horizontal,
  .objectives-list::-webkit-scrollbar-thumb:horizontal,
  .game-stats::-webkit-scrollbar-thumb:horizontal {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 4px;
  }
  
  .players-grid::-webkit-scrollbar-thumb:horizontal:hover,
  .objectives-list::-webkit-scrollbar-thumb:horizontal:hover,
  .game-stats::-webkit-scrollbar-thumb:horizontal:hover {
    background: rgba(255, 255, 255, 0.5);
  }

  /* Victory Header Content */
  .victory-header-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    padding-bottom: 16px;
    border-bottom: 1px solid #333;
  }
  
  .victory-icon { 
    font-size: 56px; 
    animation: bounce 2s infinite;
  }
  
  @keyframes bounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
    40% { transform: translateY(-10px); }
    60% { transform: translateY(-5px); }
  }
  
  .victory-message { 
    color: #fff; 
    font-size: 24px; 
    text-align: center; 
    font-weight: bold;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  }
  
  .victory-subtitle { 
    color: #ccc; 
    font-size: 16px; 
    text-align: center; 
  }

  /* Victory Summary */
  .victory-summary {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .summary-title {
    color: #0077cc;
    font-size: 20px;
    font-weight: bold;
    text-align: center;
    margin: 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #333;
  }

  /* Game Stats */
  .game-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 12px;
    padding: 16px;
    background: rgba(255,255,255,0.05);
    border-radius: 10px;
    border: 1px solid #333;
  }

  .stat-item {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #fff;
    font-size: 14px;
  }

  .stat-icon {
    font-size: 18px;
    width: 20px;
    text-align: center;
  }

  .stat-label {
    color: #ccc;
    flex: 1;
  }

  .stat-value {
    color: #fff;
    font-weight: bold;
  }

  /* Players Summary */
  .players-summary {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .players-title {
    color: #fff;
    font-size: 18px;
    font-weight: bold;
    margin: 0;
    text-align: center;
  }

  .players-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 16px;
  }

  .player-card {
    background: rgba(255,255,255,0.08);
    border: 2px solid #333;
    border-radius: 12px;
    padding: 16px;
    transition: all 0.3s ease;
    position: relative;
  }

  .player-card.winner {
    border-color: #ffdd00;
    background: rgba(255,221,0,0.1);
    box-shadow: 0 0 20px rgba(255,221,0,0.3);
  }

  .player-card.eliminated {
    opacity: 0.6;
    border-color: #666;
  }

  .player-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }

  .player-info {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 12px;
  }

  .player-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    font-weight: bold;
    border: 2px solid #fff;
  }

  .player-details {
    flex: 1;
  }

  .player-name {
    color: #fff;
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 4px;
  }

  .player-status {
    color: #ccc;
    font-size: 12px;
  }

  .player-crown {
    color: #ffdd00;
    font-size: 24px;
  }

  .player-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .player-stat {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 6px 8px;
    background: rgba(0,0,0,0.3);
    border-radius: 6px;
    font-size: 13px;
  }

  .player-stat-label {
    color: #ccc;
  }

  .player-stat-value {
    color: #fff;
    font-weight: bold;
  }

  /* Objectives Summary */
  .objectives-summary {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .objectives-title {
    color: #fff;
    font-size: 18px;
    font-weight: bold;
    margin: 0;
    text-align: center;
  }

  .objectives-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .objective-item {
    background: rgba(255,255,255,0.05);
    border: 1px solid #333;
    border-radius: 10px;
    padding: 16px;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .objective-item.completed {
    border-color: #33cc33;
    background: rgba(51,204,51,0.1);
  }

  .objective-player {
    color: #fff;
    font-weight: bold;
    min-width: 120px;
  }

  .objective-description {
    color: #ccc;
    flex: 1;
    font-size: 14px;
  }

  .objective-status {
    font-size: 20px;
  }

  /* Victory Actions */
  .victory-actions { 
    display: flex; 
    gap: 16px; 
    justify-content: center;
    padding-top: 16px;
    border-top: 1px solid #333;
  }
  
  .victory-btn { 
    padding: 12px 20px; 
    border-radius: 10px; 
    border: none; 
    font-weight: bold; 
    cursor: pointer; 
    transition: all 0.2s ease;
    font-size: 16px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .victory-btn.primary { 
    background: #0077cc; 
    color: #fff; 
  }
  
  .victory-btn.primary:hover { 
    background: #005fa3; 
    transform: translateY(-1px);
  }
  
  .victory-btn.secondary { 
    background: #33cc33; 
    color: #000; 
  }
  
  .victory-btn.secondary:hover { 
    filter: brightness(1.1); 
    transform: translateY(-1px);
  }

  /* Victory Popup Mobile Responsiveness */
  @media (max-width: 768px) {
    .victory-popup {
      width: 98vw;
      max-height: 95vh;
      margin: 0;
    }

    .victory-content {
      padding: 16px;
      gap: 16px;
    }

    .victory-icon {
      font-size: 40px;
    }

    .victory-message {
      font-size: 20px;
    }

    .summary-title {
      font-size: 18px;
    }

    .game-stats {
      grid-template-columns: 1fr;
      padding: 12px;
    }

    .players-grid {
      grid-template-columns: 1fr;
    }

    .player-card {
      padding: 12px;
    }

    .player-stats {
      grid-template-columns: 1fr;
    }

    .objective-item {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }

    .objective-player {
      min-width: auto;
    }

    .victory-actions {
      flex-direction: column;
      gap: 12px;
    }

    .victory-btn {
      padding: 14px 16px;
      font-size: 14px;
    }
  }

  @media (max-width: 480px) {
    .victory-header {
      padding: 12px 16px;
    }

    .victory-header h3 {
      font-size: 16px;
    }

    .victory-content {
      padding: 12px;
      gap: 12px;
    }

    .victory-icon {
      font-size: 32px;
    }

    .victory-message {
      font-size: 16px;
    }

    .summary-title {
      font-size: 16px;
    }

    .players-title, .objectives-title {
      font-size: 16px;
    }

    .stat-item {
      font-size: 12px;
    }

    .player-info {
      gap: 8px;
    }

    .player-avatar {
      width: 32px;
      height: 32px;
      font-size: 14px;
    }

    .player-name {
      font-size: 14px;
    }

    .player-stat {
      font-size: 11px;
      padding: 4px 6px;
    }

    .objective-item {
      padding: 12px;
    }

    .victory-btn {
      padding: 12px 14px;
      font-size: 13px;
    }
  }

  /* Reinforcement Popup Styles */
  .reinforce-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(420px, 92vw);
    background: rgba(0, 0, 0, 0.95);
    border: 2px solid #33cc33;
    border-radius: 14px;
    z-index: 1002;
    display: none;
    flex-direction: column;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    box-sizing: border-box;
  }

  .reinforce-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 1001;
    display: none;
    cursor: not-allowed; /* Indicar que não é clicável */
  }

  .reinforce-header {
    display: flex;
    align-items: center;
    gap: 10px;
    justify-content: space-between;
    padding: 12px 16px;
    background: rgba(51, 204, 51, 0.15);
    border-bottom: 1px solid #2a9e2a;
    border-radius: 12px 12px 0 0;
  }
  .reinforce-title { color: #fff; font-weight: bold; font-size: 16px; }
  .reinforce-close { background: none; border: none; color: #ccc; font-size: 18px; cursor: pointer; }
  .reinforce-close:hover { color: #fff; }

  .reinforce-content { padding: 14px; display: flex; flex-direction: column; gap: 10px; }
  .reinforce-territory { display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.05); border: 1px solid #33cc33; border-radius: 8px; padding: 8px 10px; color: #fff; }
  .reinforce-territory .name { font-weight: bold; }
  .reinforce-territory .troops { margin-left: auto; color: #ccc; font-size: 12px; }

  .reinforce-controls { background: rgba(255,255,255,0.05); border: 1px solid #444; border-radius: 8px; padding: 10px; display: flex; align-items: center; justify-content: space-between; }
  .reinforce-label { color: #ccc; font-size: 12px; }
  .reinforce-qty { color: #fff; font-weight: bold; font-size: 16px; }
  .reinforce-stepper { display: flex; align-items: center; gap: 8px; }
  .reinforce-btn { padding: 6px 10px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; }
  .reinforce-minus { background: #ff3333; color: #fff; }
  .reinforce-plus { background: #33ff33; color: #000; }

  .reinforce-actions { display: flex; justify-content: center; gap: 10px; }
  .reinforce-confirm { background: #33cc33; color: #000; }
  .reinforce-cancel { background: #666; color: #fff; }
  .reinforce-actions .reinforce-btn { padding: 10px 14px; }

  /* Transfer Popup Styles */
  .transfer-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(460px, 94vw);
    background: rgba(0, 0, 0, 0.95);
    border: 2px solid #cc6633;
    border-radius: 14px;
    z-index: 1002;
    display: none;
    flex-direction: column;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    box-sizing: border-box;
  }
  .transfer-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 1001; display: none; cursor: not-allowed; }
  .transfer-header { display: flex; align-items: center; justify-content: space-between; gap: 8px; padding: 12px 16px; background: rgba(204,102,51,0.15); border-bottom: 1px solid #a55229; border-radius: 12px 12px 0 0; }
  .transfer-title { color: #fff; font-weight: bold; font-size: 16px; }
  .transfer-close { background: none; border: none; color: #ccc; font-size: 18px; cursor: pointer; }
  .transfer-close:hover { color: #fff; }
  .transfer-content { padding: 14px; display: flex; flex-direction: column; gap: 10px; }
  .transfer-row { display: flex; align-items: center; gap: 8px; color: #fff; }
  .transfer-card { flex: 1; display: flex; align-items: center; gap: 8px; background: rgba(255,255,255,0.05); border: 1px solid #cc6633; border-radius: 8px; padding: 8px 10px; }
  .transfer-card .name { font-weight: bold; }
  .transfer-card .troops { margin-left: auto; color: #ccc; font-size: 12px; }
  .transfer-arrow { width: 36px; text-align: center; }
  .transfer-controls { background: rgba(255,255,255,0.05); border: 1px solid #444; border-radius: 8px; padding: 10px; display: flex; align-items: center; justify-content: space-between; }
  .transfer-label { color: #ccc; font-size: 12px; }
  .transfer-qty { color: #fff; font-weight: bold; font-size: 16px; }
  .transfer-stepper { display: flex; align-items: center; gap: 8px; }
  .transfer-btn { padding: 6px 10px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; }
  .transfer-minus { background: #ff3333; color: #fff; }
  .transfer-plus { background: #ffaa00; color: #000; }
  .transfer-actions { display: flex; justify-content: center; gap: 10px; }
  .transfer-confirm { background: #cc6633; color: #fff; }
  .transfer-cancel { background: #666; color: #fff; }
  .transfer-actions .transfer-btn { padding: 10px 14px; }

  /* Remanejamento Popup Styles */
  .remanejamento-popup {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: min(480px, 94vw);
    max-height: 90vh;
    background: rgba(26, 26, 26, 0.96);
    border: 3px solid #0077cc;
    border-radius: 15px;
    z-index: 1002;
    display: none;
    flex-direction: column;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    box-sizing: border-box;
  }
  .remanejamento-backdrop { 
    position: fixed; 
    inset: 0; 
    background: rgba(0,0,0,0.7); 
    z-index: 1001; 
    display: none; 
    cursor: not-allowed; /* Indicar que não é clicável */
  }
  .remanejamento-header { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    gap: 12px; 
    padding: 16px 20px; 
    background: linear-gradient(135deg, rgba(0,119,204,0.2), rgba(0,119,204,0.1)); 
    border-bottom: 2px solid #0077cc; 
    border-radius: 12px 12px 0 0; 
  }
  .remanejamento-icon {
    font-size: 24px;
    font-weight: bold;
  }
  .remanejamento-title { 
    color: #fff; 
    font-weight: bold; 
    font-size: 20px;
    flex: 1;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  }
  .remanejamento-close { 
    background: none; 
    border: none; 
    color: #ccc; 
    font-size: 18px; 
    cursor: pointer; 
    padding: 8px;
    border-radius: 6px;
    transition: all 0.2s ease;
  }
  .remanejamento-close:hover { 
    color: #fff; 
    background: rgba(255,255,255,0.1);
  }
  .remanejamento-content { 
    padding: 20px; 
    display: flex; 
    flex-direction: column; 
    gap: 16px; 
  }
  .remanejamento-row { 
    display: flex; 
    align-items: center; 
    gap: 12px; 
    color: #fff; 
  }
  .remanejamento-card { 
    flex: 1; 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    background: rgba(42, 42, 42, 0.9); 
    border: 2px solid #0077cc; 
    border-radius: 10px; 
    padding: 12px; 
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }
  .remanejamento-territory-icon {
    font-size: 18px;
  }
  .remanejamento-territory-name { 
    font-weight: bold; 
    font-size: 14px;
  }
  .remanejamento-territory-troops { 
    margin-left: auto; 
    color: #ccc; 
    font-size: 12px; 
  }
  .remanejamento-arrow { 
    width: 40px; 
    text-align: center; 
    font-size: 20px;
  }
  .remanejamento-controls { 
    background: rgba(42, 42, 42, 0.9); 
    border: 2px solid #444; 
    border-radius: 10px; 
    padding: 16px; 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
  }
  .remanejamento-label { 
    color: #ccc; 
    font-size: 14px; 
    font-weight: bold;
  }
  .remanejamento-qty { 
    color: #fff; 
    font-weight: bold; 
    font-size: 18px; 
    margin: 0 16px;
  }
  .remanejamento-stepper { 
    display: flex; 
    align-items: center; 
    gap: 12px; 
  }
  .remanejamento-btn { 
    padding: 8px 12px; 
    border-radius: 8px; 
    border: none; 
    cursor: pointer; 
    font-weight: bold; 
    font-size: 16px;
    transition: all 0.2s ease;
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }
  .remanejamento-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.4);
  }
  .remanejamento-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
  }
  .remanejamento-minus { 
    background: #ff3333; 
    color: #fff; 
  }
  .remanejamento-minus:hover {
    background: #ff4444;
  }
  .remanejamento-plus { 
    background: #ffaa00; 
    color: #000; 
  }
  .remanejamento-plus:hover {
    background: #ffbb11;
  }
  .remanejamento-actions { 
    display: flex; 
    justify-content: center; 
    gap: 16px; 
  }
  .remanejamento-confirm { 
    background: #33cc33; 
    color: #000; 
    padding: 12px 18px;
  }
  .remanejamento-confirm:hover {
    background: #44dd44;
  }
  .remanejamento-cancel { 
    background: #cc3333; 
    color: #fff; 
    padding: 12px 18px;
  }
  .remanejamento-cancel:hover {
    background: #dd4444;
  }

  /* Responsive adjustments for very small screens */
  @media (max-width: 480px) {
    .history-popup {
      width: 85vw;
      height: 60vh;
      top: 45%;
    }
  }

  @media (max-width: 360px) {
    .history-popup {
      width: 80vw;
      height: 50vh;
      top: 40%;
    }
  }

  .history-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: min(15px, 3vw) min(20px, 4vw);
    border-bottom: 1px solid #444;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 13px 13px 0 0;
    flex-shrink: 0;
  }

  @media (max-width: 480px) {
    .history-header {
      padding: 10px 15px;
    }
  }

  @media (max-width: 360px) {
    .history-header {
      padding: 8px 12px;
    }
  }

  .history-tabs {
    display: flex;
    gap: min(10px, 2vw);
  }

  .history-tab {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid #444;
    color: #ccc;
    padding: min(8px, 2vw) min(16px, 3vw);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: min(14px, 3.5vw);
    font-weight: bold;
    white-space: nowrap;
  }

  @media (max-width: 480px) {
    .history-tab {
      padding: 6px 12px;
      font-size: 12px;
    }
  }

  @media (max-width: 360px) {
    .history-tab {
      padding: 5px 10px;
      font-size: 11px;
    }
  }

  .history-tab.active {
    background: #0077cc;
    border-color: #0077cc;
    color: white;
  }

  .history-tab:hover {
    background: rgba(255, 255, 255, 0.2);
    color: white;
  }

  .history-tab.active:hover {
    background: #005fa3;
  }

  .history-header h3 {
    margin: 0;
    color: white;
    font-size: 18px;
    font-weight: bold;
  }

  .history-close {
    background: none;
    border: none;
    color: #ccc;
    font-size: min(20px, 5vw);
    cursor: pointer;
    padding: min(5px, 1.5vw);
    border-radius: 5px;
    transition: all 0.2s ease;
  }

  .history-close:hover {
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }

  .history-content {
    flex: 1;
    padding: min(15px, 3vw);
    overflow-y: auto;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    gap: min(8px, 2vw);
    min-height: 0;
    box-sizing: border-box;
    width: 100%;
    max-height: calc(100% - 70px);
    border-radius: 0 0 13px 13px;
  }

  @media (max-width: 480px) {
    .history-content {
      padding: 10px;
      gap: 6px;
    }
  }

  @media (max-width: 360px) {
    .history-content {
      padding: 8px;
      gap: 5px;
    }
  }

  .history-entry {
    display: flex;
    align-items: flex-start;
    gap: min(10px, 2vw);
    padding: min(8px, 2vw) min(12px, 3vw);
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    border-left: 3px solid #0077cc;
    transition: all 0.2s ease;
    width: 100%;
    box-sizing: border-box;
    min-width: 0;
  }

  .history-entry:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  /* Chat Styles */
  .chat-content {
    display: none;
    flex-direction: column;
    height: 100%;
    flex: 1;
    min-height: 0;
    overflow: hidden;
    position: relative;
    border-radius: 0 0 13px 13px;
  }

  .chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: min(15px, 3vw);
    display: flex;
    flex-direction: column;
    gap: min(8px, 2vw);
    min-height: 0;
    max-height: calc(100% - 80px);
  }

  .chat-message {
    display: flex;
    align-items: flex-start;
    gap: min(10px, 2vw);
    padding: min(8px, 2vw) min(12px, 3vw);
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    border-left: 3px solid #0077cc;
    transition: all 0.2s ease;
    width: 100%;
    box-sizing: border-box;
    min-width: 0;
  }

  .chat-message:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  .chat-message.own-message {
    border-left-color: #33cc33;
    background: rgba(51, 204, 51, 0.1);
  }

  .chat-message.own-message:hover {
    background: rgba(51, 204, 51, 0.15);
  }

  .chat-input-container {
    padding: min(15px, 3vw);
    border-top: 1px solid #444;
    background: rgba(0, 0, 0, 1);
    border: 1px solid #444;
    border-radius: 0 0 13px 13px;
    flex-shrink: 0;
    position: relative;
    z-index: 10;
    height: min(80px, 20vw);
    box-sizing: border-box;
    visibility: visible !important;
    opacity: 1 !important;
    display: block !important;
    margin-top: auto;
  }

  @media (max-width: 480px) {
    .chat-input-container {
      padding: 10px;
      height: 60px;
    }
  }

  @media (max-width: 360px) {
    .chat-input-container {
      padding: 8px;
      height: 50px;
    }
  }

  .chat-input-form {
    display: flex;
    gap: 10px;
    width: 100%;
    visibility: visible !important;
    opacity: 1 !important;
  }

  .chat-input {
    flex: 1;
    padding: min(10px, 2.5vw) min(12px, 3vw);
    border: 1px solid #444;
    border-radius: 6px;
    background: rgba(255, 255, 255, 0.1);
    color: white;
    font-size: min(14px, 3.5vw);
    transition: all 0.2s ease;
    visibility: visible !important;
    opacity: 1 !important;
    display: block !important;
  }

  @media (max-width: 480px) {
    .chat-input {
      padding: 8px 10px;
      font-size: 12px;
    }
  }

  @media (max-width: 360px) {
    .chat-input {
      padding: 6px 8px;
      font-size: 11px;
    }
  }

  .chat-input:focus {
    outline: none;
    border-color: #0077cc;
    background: rgba(255, 255, 255, 0.15);
  }

  .chat-input::placeholder {
    color: #888;
  }

  .chat-send-btn {
    padding: min(10px, 2.5vw) min(16px, 3vw);
    background: #0077cc;
    border: none;
    border-radius: 6px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.2s ease;
    font-size: min(14px, 3.5vw);
    white-space: nowrap;
  }

  @media (max-width: 480px) {
    .chat-send-btn {
      padding: 8px 12px;
      font-size: 12px;
    }
  }

  @media (max-width: 360px) {
    .chat-send-btn {
      padding: 6px 10px;
      font-size: 11px;
    }
  }

  .chat-send-btn:hover {
    background: #005fa3;
  }

  .chat-send-btn:disabled {
    background: #444;
    cursor: not-allowed;
  }

  .chat-message-content {
    flex: 1;
    min-width: 0;
  }

  .chat-message-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
  }

  .chat-player {
    font-weight: bold;
    color: #0077cc;
    font-size: min(12px, 3vw);
  }

  .chat-time {
    color: #888;
    font-size: min(11px, 2.5vw);
    font-family: monospace;
  }

  .chat-text {
    color: white;
    font-size: min(14px, 3.5vw);
    word-wrap: break-word;
    line-height: 1.4;
  }

  @media (max-width: 480px) {
    .chat-text {
      font-size: 12px;
    }
  }

  @media (max-width: 360px) {
    .chat-text {
      font-size: 11px;
    }
  }

  .chat-empty {
    color: #888;
    text-align: center;
    font-style: italic;
    padding: 20px;
  }

  /* Message Badge */
  .message-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: #ff3333;
    color: white;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: bold;
    border: 2px solid #1a1a1a;
    min-width: 20px;
  }

  .history-timestamp {
    color: #888;
    font-size: min(12px, 3vw);
    font-family: monospace;
    white-space: nowrap;
    min-width: min(60px, 15vw);
    flex-shrink: 0;
  }

  .history-message {
    color: white;
    font-size: 14px;
    line-height: 1.4;
    flex: 1;
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    min-width: 0;
    overflow: hidden;
  }

  .history-empty {
    color: #888;
    font-style: italic;
    text-align: center;
    padding: 20px;
  }

  /* Scrollbar styling for history content */
  .history-content::-webkit-scrollbar {
    width: 10px;
  }

  .history-content::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
  }

  .history-content::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 5px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .history-content::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
  }

  /* Firefox scrollbar styling */
  .history-content {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.1);
  }

  /* Player Info Panel - Bottom */
  .player-info-panel {
    position: fixed;
    bottom: 5vh;
    left: calc(2vw + 180px);
    z-index: 1001;
    display: none;
  }

  .player-info-panel.open {
    display: block;
  }

  .panel-body {
    padding: 0;
  }

  .player-grid {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    max-width: calc(100vw - 200px);
  }

  .player-card {
    background: rgba(42, 42, 42, 0.95);
    border: 2px solid #444;
    border-radius: 10px;
    padding: 8px;
    transition: all 0.3s ease;
    backdrop-filter: blur(5px);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    min-width: 120px;
  }

  .player-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
  }

  .player-card.current-turn {
    border-color: #ffaa00;
    box-shadow: 0 0 10px rgba(255, 170, 0, 0.3);
  }

  .player-card.inactive {
    opacity: 0.6;
    filter: grayscale(50%);
  }

  .player-card.inactive .player-name-modal {
    color: #888;
  }

  .player-header {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-bottom: 6px;
  }

  .player-avatar-modal {
    width: 25px;
    height: 25px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    border: 2px solid #fff;
  }

  .player-name-modal {
    font-size: 11px;
    font-weight: bold;
    color: white;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 60px;
  }

  .player-stats-modal {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .stat-item {
    display: flex;
    justify-content: space-between;
    padding: 2px 0;
    border-bottom: 1px solid #333;
  }

  .stat-label {
    color: #ccc;
    font-size: 9px;
  }

  .stat-value {
    color: white;
    font-weight: bold;
    font-size: 9px;
  }

  .turn-badge {
    background: #ffaa00;
    color: black;
    padding: 1px 4px;
    border-radius: 6px;
    font-size: 8px;
    font-weight: bold;
    margin-left: auto;
  }

  /* Responsive adjustments for small screens */
  @media (max-width: 768px) {
    .player-info-panel {
      left: calc(1vw + 100px);
      bottom: 3vh;
    }
    
    .player-grid {
      max-width: calc(100vw - 150px);
      gap: 6px;
    }
    
    .player-card {
      padding: 6px;
      min-width: 100px;
    }
    
    .player-avatar-modal {
      width: 20px;
      height: 20px;
      font-size: 12px;
    }
    
    .player-name-modal {
      font-size: 10px;
      max-width: 50px;
    }
    
    .stat-label, .stat-value {
      font-size: 8px;
    }
    
    .turn-badge {
      font-size: 7px;
      padding: 1px 3px;
    }
    
    .turn-indicator {
      bottom: 3vh;
      left: 1vw;
      width: min(100px, 15vw);
      height: min(100px, 15vw);
    }

    .turn-circle {
      width: min(80px, 12vw);
      height: min(80px, 12vw);
      font-size: min(14px, 2vw);
    }

    .turn-mark {
      width: min(4px, 0.5vw);
      height: min(20px, 2.5vw);
      transform-origin: 50% min(40px, 6vw);
      margin-left: min(-2px, -0.25vw);
    }

    .turn-pointer {
      border-left: min(8px, 1.2vw) solid transparent;
      border-right: min(8px, 1.2vw) solid transparent;
      border-bottom: min(18px, 2.5vw) solid currentColor;
      transform-origin: 50% min(40px, 6vw);
      top: min(-6px, -0.8vw);
      margin-left: min(-8px, -1.2vw);
    }

    .turn-text {
      bottom: min(-25px, -3.5vw);
      font-size: min(12px, 1.8vw);
      max-width: min(150px, 20vw);
    }



    .timer-label {
      font-size: 10px;
    }

    .timer-display {
      font-size: 18px;
      padding: 4px 8px;
      min-width: 60px;
    }
  }

  @media (max-width: 480px) {
    .turn-indicator {
      bottom: 2vh;
      left: 0.5vw;
      width: min(80px, 18vw);
      height: min(80px, 18vw);
    }

    .turn-circle {
      width: min(65px, 15vw);
      height: min(65px, 15vw);
      font-size: min(12px, 2.5vw);
    }

    .turn-mark {
      width: min(3px, 0.6vw);
      height: min(16px, 3vw);
      transform-origin: 50% min(32px, 7.5vw);
      margin-left: min(-1.5px, -0.3vw);
    }

    .turn-pointer {
      border-left: min(6px, 1.5vw) solid transparent;
      border-right: min(6px, 1.5vw) solid transparent;
      border-bottom: min(14px, 3.5vw) solid currentColor;
      transform-origin: 50% min(32px, 7.5vw);
      top: min(-4px, -1vw);
      margin-left: min(-6px, -1.5vw);
    }

    .turn-text {
      bottom: min(-20px, -4.5vw);
      font-size: min(10px, 2.2vw);
      max-width: min(120px, 25vw);
    }



    .timer-label {
      font-size: 8px;
    }

    .timer-display {
      font-size: 14px;
      padding: 3px 6px;
      min-width: 50px;
    }

    /* Room Selection Responsive */
    .room-options {
      flex-direction: column;
      gap: 15px;
    }

    .room-option {
      padding: 15px;
    }

    .room-option-icon {
      font-size: 24px;
    }

    .room-option-title {
      font-size: 16px;
    }

    .room-option-description {
      font-size: 12px;
    }

    .room-selection-container {
      padding: 30px 20px;
      width: 95vw;
    }

    .room-selection-header h1 {
      font-size: 24px;
    }

    .room-selection-header p {
      font-size: 14px;
    }
  }

  /* Mobile Responsive Styles for HUD */
  @media (max-width: 768px) {
    /* Top HUD Bar - Mobile */
    .hud-top {
      height: 28px;
      padding: 0 8px;
    }

    /* Player Info - Mobile */
    .player-info {
      gap: 6px;
      min-width: 0;
      flex-shrink: 0;
    }

    .player-avatar {
      width: 18px;
      height: 18px;
      font-size: 9px;
      border: 1px solid #fff;
      flex-shrink: 0;
    }

    .player-name {
      font-size: 10px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 80px;
      min-width: 0;
    }

    .player-stats {
      font-size: 8px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100px;
      min-width: 0;
    }

    /* Action Buttons - Mobile */
    .action-buttons {
      gap: 3px;
    }

    .hud-button {
      padding: 2px 4px;
      border-radius: 6px;
      font-size: 8px;
      gap: 1px;
    }

    .hud-button span:first-child {
      font-size: 12px;
    }

    /* Timer Display - Mobile */
    .timer-display {
      font-size: 10px;
      font-weight: bold;
      padding: 1px 4px;
      min-width: 40px;
    }

    /* Game Instructions - Mobile */
    .game-instructions {
      margin: 0 5px;
      flex: 1;
      min-width: 0; /* Allow shrinking */
    }

    .instruction-text {
      font-size: 8px;
      padding: 2px 4px;
      max-width: none; /* Remove fixed max-width */
      white-space: normal; /* Allow text to wrap on mobile */
      overflow: visible; /* Show full text */
      text-overflow: clip; /* Remove ellipsis */
      border-radius: 4px;
      word-wrap: break-word; /* Break long words if necessary */
      line-height: 1.2; /* Better line height for mobile */
    }

    /* Game Info - Mobile */
    .game-info {
      gap: 12px;
    }

    .info-item {
      font-size: 10px;
      gap: 4px;
    }

    .info-icon {
      font-size: 12px;
    }
  }

  /* Extra Small Mobile Devices */
  @media (max-width: 480px) {
    .game-container {
      padding-top: 0; /* Remove padding, canvas will be positioned absolutely */
    }
    
    .game-container canvas {
      top: 24px !important; /* Position below extra small mobile HUD */
      height: calc(100vh - 24px) !important; /* Use viewport height minus extra small mobile HUD */
    }
    
    .hud-top {
      height: 24px;
      padding: 0 6px;
    }

    /* Game Instructions - Extra Small Mobile */
    .game-instructions {
      margin: 0 4px;
    }

    .instruction-text {
      font-size: 8px;
      padding: 2px 4px;
      line-height: 1.2;
      white-space: normal; /* Allow text to wrap on extra small mobile */
      overflow: visible; /* Show full text */
      text-overflow: clip; /* Remove ellipsis */
      word-wrap: break-word; /* Break long words if necessary */
    }

    /* Player Info - Extra Small Mobile */
    .player-info {
      gap: 5px;
    }

    .player-avatar {
      width: 16px;
      height: 16px;
      font-size: 8px;
      flex-shrink: 0;
    }

    .player-name {
      font-size: 9px;
      max-width: 70px;
    }

    .player-stats {
      font-size: 7px;
      max-width: 90px;
    }

    .hud-button {
      padding: 1px 3px;
      font-size: 7px;
    }

    .hud-button span:first-child {
      font-size: 11px;
    }

    .timer-display {
      font-size: 8px;
      padding: 1px 3px;
      min-width: 30px;
    }
  }

  /* Very Small Mobile Devices */
  @media (max-width: 400px) {
    .hud-top {
      height: 22px;
      padding: 0 5px;
    }

    /* Game Instructions - Very Small Mobile */
    .game-instructions {
      margin: 0 3px;
    }

    .instruction-text {
      font-size: 7px;
      padding: 2px 3px;
      line-height: 1.1;
      white-space: normal; /* Allow text to wrap on very small mobile */
      overflow: visible; /* Show full text */
      text-overflow: clip; /* Remove ellipsis */
      word-wrap: break-word; /* Break long words if necessary */
    }
    
    /* Player Info - Very Small Mobile */
    .player-info {
      gap: 4px;
    }
    
    .player-avatar {
      width: 14px;
      height: 14px;
      font-size: 7px;
      flex-shrink: 0;
    }
    
    .player-name {
      font-size: 8px;
      max-width: 60px;
    }
    
    .player-stats {
      font-size: 6px;
      max-width: 80px;
    }
    
    .hud-button {
      padding: 1px 2px;
      font-size: 6px;
    }
    
    .timer-display {
      font-size: 7px;
      padding: 1px 2px;
      min-width: 25px;
    }
    
    .game-container {
      padding-top: 0;
    }
    
    .game-container canvas {
      top: 22px !important;
      height: calc(100vh - 22px) !important;
    }
  }

  /* Landscape Mobile Devices */
  @media (max-height: 500px) and (orientation: landscape) {
    .hud-top {
      height: 26px !important;
      padding: 0 6px !important;
    }

    /* Game Instructions - Landscape Mobile */
    .game-instructions {
      margin: 0 5px !important;
    }

    .instruction-text {
      font-size: 8px !important;
      padding: 2px 4px !important;
      line-height: 1.2 !important;
      white-space: normal !important; /* Allow text to wrap in landscape */
      overflow: visible !important; /* Show full text */
      text-overflow: clip !important; /* Remove ellipsis */
      word-wrap: break-word !important; /* Break long words if necessary */
    }
    
    .player-info {
      gap: 4px !important;
    }
    
    .player-avatar {
      width: 16px !important;
      height: 16px !important;
      font-size: 9px !important;
      flex-shrink: 0 !important;
    }
    
    .player-name {
      font-size: 10px !important;
      max-width: 80px !important;
    }
    
    .player-stats {
      display: none !important; /* Hide stats in landscape to save space */
    }
    
    .action-buttons {
      gap: 3px !important;
    }
    
    .hud-button {
      padding: 2px 4px !important;
      font-size: 8px !important;
      border-radius: 6px !important;
    }
    
    .hud-button span:first-child {
      font-size: 9px !important;
    }
    
    .timer-display {
      font-size: 9px !important;
      padding: 2px 4px !important;
      min-width: 30px !important;
    }
    
    .game-container {
      padding-top: 0 !important;
    }
    
    .game-container canvas {
      top: 22px !important;
      width: 100% !important;
      height: calc(100vh - 22px) !important;
      object-fit: fill !important;
    }
  }

  /* Extra Compact for Very Small Landscape */
  @media (max-height: 400px) and (orientation: landscape) {
    .hud-top {
      height: 22px !important;
      padding: 0 4px !important;
    }

    /* Game Instructions - Very Small Landscape */
    .game-instructions {
      margin: 0 3px !important;
    }

    .instruction-text {
      font-size: 7px !important;
      padding: 2px 3px !important;
      line-height: 1.1 !important;
      white-space: normal !important; /* Allow text to wrap in very small landscape */
      overflow: visible !important; /* Show full text */
      text-overflow: clip !important; /* Remove ellipsis */
      word-wrap: break-word !important; /* Break long words if necessary */
    }
    
    .player-info {
      gap: 3px !important;
    }
    
    .player-avatar {
      width: 14px !important;
      height: 14px !important;
      font-size: 8px !important;
      flex-shrink: 0 !important;
    }
    
    .player-name {
      font-size: 9px !important;
      max-width: 70px !important;
    }
    
    .hud-button {
      padding: 1px 3px !important;
      font-size: 7px !important;
    }
    
    .hud-button span:first-child {
      font-size: 8px !important;
    }
    
    .timer-display {
      font-size: 8px !important;
      padding: 1px 3px !important;
      min-width: 25px !important;
    }
    
    .game-container {
      padding-top: 0 !important;
    }
    
    .game-container canvas {
      top: 22px !important;
      width: 100% !important;
      height: calc(100vh - 22px) !important;
      object-fit: fill !important;
    }
  }

  /* Mobile Touch Targets for Game Interfaces */
  @media (max-width: 768px) {
    /* Increase touch targets for mobile devices */
    .game-interface-button {
      min-height: 44px;
      min-width: 44px;
      font-size: 16px;
      padding: 8px 12px;
    }
  }

  /* Extra Small Mobile Touch Targets */
  @media (max-width: 480px) {
    .game-interface-button {
      min-height: 48px;
      min-width: 48px;
      font-size: 18px;
      padding: 10px 14px;
    }
  }

  /* Responsive improvements for all game elements */
  @media (max-width: 768px) {
    /* Improve touch targets for all interactive elements */
    .hud-button, .login-button, .mode-option, .back-button {
      min-height: 44px;
      min-width: 44px;
      touch-action: manipulation;
    }
    
    /* Improve text readability on small screens */
    .instruction-text, .player-name, .player-stats {
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
    }
    
    /* Optimize spacing for mobile */
    .action-buttons {
      gap: 4px;
    }
    
    .player-info {
      gap: 6px;
    }
  }

  /* Ultra-compact mode for very small screens */
  @media (max-width: 360px) {
    .hud-top {
      height: 20px;
      padding: 0 4px;
    }

    /* Game Instructions - Ultra Compact */
    .game-instructions {
      margin: 0 2px;
    }

    .instruction-text {
      font-size: 6px;
      padding: 2px;
      line-height: 1;
      min-height: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      white-space: normal; /* Allow text to wrap on ultra compact */
      overflow: visible; /* Show full text */
      text-overflow: clip; /* Remove ellipsis */
      word-wrap: break-word; /* Break long words if necessary */
    }
    
    /* Player Info - Ultra Compact */
    .player-info {
      gap: 3px;
    }
    
    .player-avatar {
      width: 12px;
      height: 12px;
      font-size: 6px;
      flex-shrink: 0;
    }
    
    .player-name {
      font-size: 7px;
      max-width: 50px;
    }
    
    .player-stats {
      font-size: 5px;
      max-width: 70px;
    }
    
    .hud-button {
      padding: 1px 2px;
      font-size: 5px;
      min-height: 20px;
      min-width: 20px;
    }
    
    .hud-button span:first-child {
      font-size: 8px;
    }
    
    .timer-display {
      font-size: 6px;
      padding: 1px 2px;
      min-width: 20px;
    }
    
    .game-container canvas {
      top: 20px !important;
      height: calc(100vh - 20px) !important;
    }
  }

  /* Troops Overlay */
  .troops-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* Allow clicks to pass through to the game */
    z-index: 10; /* Above game canvas but below HUD */
  }

  .troop-indicator {
    position: absolute;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: white;
    border: 2px solid #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    color: #000;
    transform: translate(-50%, -50%);
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    transition: all 0.2s ease;
    z-index: 11;
  }

  @media (max-height: 400px) {
    .troop-indicator {
      width: 10px;
      height: 10px;
      font-size: 6px;
      border-width: 1.5px;
    }
  }

  /* Responsive troop indicators for mobile */
  @media (max-width: 768px) {
    .troop-indicator {
      width: 10px;
      height: 10px;
      font-size: 6px;
      border-width: 1.5px;
    }
  }

  @media (max-width: 480px) {
    .troop-indicator {
      width: 8px;
      height: 8px;
      font-size: 4px;
      border-width: 1px;
    }
  }

  @media (max-width: 400px) {
    .troop-indicator {
      width: 8px;
      height: 8px;
      font-size: 4px;
      border-width: 1px;
    }
  }

  @media (max-width: 360px) {
    .troop-indicator {
      width: 8px;
      height: 8px;
      font-size: 4px;
      border-width: 1px;
    }
  }


  /* Player color classes for troop indicators */
  .troop-indicator.azul { background: #3366ff; color: white; }
  .troop-indicator.vermelho { background: #ff3333; color: white; }
  .troop-indicator.amarelo { background: #ffcc00; color: black; }
  .troop-indicator.verde { background: #33cc33; color: white; }
  .troop-indicator.roxo { background: #9933cc; color: white; }
  .troop-indicator.preto { background: #222222; color: white; }

  /* Continents Overlay */
  .continents-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none; /* Allow clicks to pass through to the game */
    z-index: 9; /* Above game canvas but below troops and HUD */
  }

  .continent-label {
    position: absolute;
    color: white;
    border-radius: 8px;
    padding: 6px 10px;
    font-size: 14px;
    font-weight: bold;
    text-align: center;
    transform: translate(-50%, -50%);
    min-width: 80px;
    white-space: nowrap;
    pointer-events: auto;
  }

  /* Connections Overlay */
  .connections-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 8; /* Below continent labels and troop indicators */
  }

  .connection-line {
    position: absolute;
    height: 2px; /* line thickness */
    transform-origin: 0 50%;
    background: repeating-linear-gradient(90deg,
      rgba(255,255,255,0.9) 0 10px,
      rgba(255,255,255,0) 10px 20px
    );
    filter: drop-shadow(0 0 2px rgba(0,0,0,0.8));
    border-radius: 1px;
  }

  /* Turn Confirmation Popup (HTML) */
  .turn-confirm-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999999; /* ensure above troops/continents/HUD */
    pointer-events: auto;
  }

  .turn-confirm-modal {
    width: min(480px, 92vw);
    background: rgba(26,26,26,0.95);
    border: 1px solid #0077cc;
    border-radius: 10px;
    color: #fff;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    transform: scale(0.95);
    opacity: 0;
    transition: transform 200ms ease, opacity 200ms ease;
  }

  .turn-confirm-modal.show {
    transform: scale(1);
    opacity: 1;
  }

  .turn-confirm-header {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    background: rgba(0,119,204,0.9);
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    font-weight: 700;
  }

  .turn-confirm-title {
    font-size: 14px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
  }

  .turn-confirm-body {
    padding: 10px 12px;
    text-align: center;
  }

  .turn-confirm-warning {
    margin: 6px 0 10px;
    font-size: 12px;
    line-height: 1.25;
  }

  .turn-timer-label { font-size: 10px; color: #cccccc; }
  .turn-timer-box {
    margin: 4px auto 0;
    width: 110px;
    height: 30px;
    background: rgba(42,42,42,0.9);
    border: 1px solid #0077cc;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 14px;
    color: #ffff00;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }

  .turn-confirm-actions { padding: 6px 12px 10px; text-align: center; }
  .turn-confirm-btn {
    padding: 8px 14px;
    background: #33cc33;
    color: #fff;
    font-weight: 700;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  .turn-confirm-btn:hover { background: #44dd44; }

  .continent-label .continent-name {
    display: block;
    font-size: 1em;
    margin-bottom: 2px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
  }

  .continent-label .continent-bonus {
    display: block;
    font-size: 0.8em;
    color: #ffaa00;
    font-weight: normal;
  }

  /* Continent states */
  .continent-label.controlled {
    border-color: #33cc33;
    background: rgba(0,100,0,0.9);
  }

  .continent-label.controlled .continent-bonus {
    color: #88ff88;
  }

  .continent-label.priority {
    border-color: #ff3333;
    background: rgba(100,0,0,0.9);
    animation: priorityPulse 2s infinite;
  }

  @keyframes priorityPulse {
    0%, 100% { box-shadow: 0 3px 12px rgba(255,51,51,0.4); }
    50% { box-shadow: 0 3px 20px rgba(255,51,51,0.8); }
  }

  /* Responsive continent labels for mobile */
  @media (max-width: 768px) {
    .continent-label {
      font-size: 12px;
      padding: 4px 8px;
      min-width: 70px;
      border-radius: 6px;
    }

    .continent-label .continent-bonus {
      font-size: 0.75em;
    }
  }

  @media (max-width: 480px) {
    .continent-label {
      font-size: 11px;
      padding: 3px 6px;
      min-width: 60px;
      border-radius: 5px;
    }

    .continent-label .continent-bonus {
      font-size: 0.7em;
    }
  }

  @media (max-width: 400px) {
    .continent-label {
      font-size: 10px;
      padding: 2px 5px;
      min-width: 55px;
      border-radius: 4px;
    }

    .continent-label .continent-bonus {
      font-size: 0.65em;
    }
  }

  @media (max-width: 360px) {
    .continent-label {
      font-size: 9px;
      padding: 2px 4px;
      min-width: 50px;
      border-radius: 3px;
    }

    .continent-label .continent-bonus {
      font-size: 0.6em;
    }
  }

  /* High DPI display optimizations */
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .hud-button, .login-button, .mode-option, .back-button {
      border-width: 0.5px;
    }
    
    .hud-top, .hud-bottom {
      border-width: 0.5px;
    }
  }

  /* Dark mode support */
  @media (prefers-color-scheme: dark) {
    /* The game already uses dark theme, but we can optimize for system dark mode */
    .login-container, .mode-selection-container, .lobby-container {
      background: rgba(0, 0, 0, 0.9);
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .hud-button:hover, .login-button:hover, .mode-option:hover {
      transform: none;
    }
    
    .turn-indicator:hover {
      transform: none;
    }
    
    .player-card:hover {
      transform: none;
    }
  }
</style>
</head>
<body>
  <!-- Login Screen -->
  <div class="login-screen" id="login-screen">
    <div class="login-container">
      <div class="login-header">
        <h1>🌍 Domino</h1>
        <p>Entre com seu nome para começar</p>
      </div>
      
      <form class="login-form" id="login-form">
        <div class="input-group">
          <label for="username">Nome do Jogador</label>
          <input type="text" id="username" name="username" placeholder="Digite seu nome..." required>
        </div>
        
        <div class="flag-selector-container">
          <label>Selecione seu país:</label>
          <div class="flag-selector">
            <button type="button" class="flag-nav-btn" id="flag-prev">◀</button>
            <div class="flag-display" id="flag-display">
              <span class="flag-emoji" id="current-flag">🇺🇸</span>
              <span class="flag-name" id="current-flag-name">Estados Unidos</span>
            </div>
            <button type="button" class="flag-nav-btn" id="flag-next">▶</button>
          </div>
          <input type="hidden" id="selected-country" name="selected-country" value="US">
        </div>
        
        <button type="submit" class="login-button">
          <span>🚀</span>
          <span>CONTINUAR</span>
        </button>
      </form>
      
      <div class="login-footer">
        <p>Conecte-se e domine o mundo!</p>
        <div class="discord-link">
          <a href="https://discord.gg/db3Y8WBGt4" target="_blank" rel="noopener noreferrer" title="Entre no nosso servidor Discord!" id="discord-link">
            <svg class="discord-icon" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276c-.598.3428-1.2194.6447-1.8722.8923a.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z"/>
            </svg>
            <span id="discord-button-text">Discord</span>
          </a>
        </div>
      </div>
    </div>
  </div>



  <!-- Mode Selection Screen (initially hidden) -->
  <div class="mode-selection-screen" id="mode-selection-screen" style="display: none;">
    <div class="mode-selection-container">
      <div class="mode-selection-header">
        <h1>🎮 Selecionar Modo</h1>
        <p>Escolha como você quer jogar</p>
      </div>
      
      <div class="mode-options">
        <div class="mode-option" id="mode-skirmish">
          <div class="mode-icon">⚔️</div>
          <div class="mode-content">
            <h3>Skirmish</h3>
            <p>Jogo rápido com jogadores aleatórios do lobby global</p>
            <div class="mode-status available">Disponível</div>
          </div>
        </div>
        
        <div class="mode-option disabled" id="mode-dominium">
          <div class="mode-icon">🏰</div>
          <div class="mode-content">
            <h3>Dominium</h3>
            <p>Modo estratégico com campanhas e progressão</p>
            <div class="mode-status unavailable">Work in Progress</div>
          </div>
        </div>
      </div>
      
      <div class="mode-selection-footer">
        <button class="back-button" id="back-to-login">← Voltar ao Login</button>
      </div>
    </div>
  </div>

  <!-- Skirmish Mode Screen (initially hidden) -->
  <div class="skirmish-mode-screen" id="skirmish-mode-screen" style="display: none;">
    <div class="skirmish-mode-container">
      <div class="skirmish-mode-header">
        <h1>⚔️ Modo Skirmish</h1>
        <p>Jogo rápido e intenso com jogadores do mundo todo</p>
      </div>
      
      <div class="skirmish-options">
        <div class="skirmish-option" id="skirmish-start-match">
          <div class="skirmish-option-icon">🚀</div>
          <div class="skirmish-option-content">
            <h3>Iniciar Partida</h3>
            <p>Entre no lobby global e aguarde outros jogadores</p>
            <div class="skirmish-option-status">Disponível</div>
          </div>
        </div>
        
        <div class="skirmish-option skirmish-option-disabled" id="skirmish-ranking">
          <div class="skirmish-option-icon">🏆</div>
          <div class="skirmish-option-content">
            <h3>Ranking Geral</h3>
            <p>Veja os melhores jogadores e suas estatísticas</p>
            <div class="skirmish-option-status">Em Breve</div>
          </div>
        </div>
        
        <div class="skirmish-option skirmish-option-disabled" id="skirmish-stats">
          <div class="skirmish-option-icon">📊</div>
          <div class="skirmish-option-content">
            <h3>Minhas Estatísticas</h3>
            <p>Visualize seu histórico de jogos e conquistas</p>
            <div class="skirmish-option-status">Em Breve</div>
          </div>
        </div>
        
        <div class="skirmish-option" id="skirmish-tutorial">
          <div class="skirmish-option-icon">📚</div>
          <div class="skirmish-option-content">
            <h3>Tutorial</h3>
            <p>Aprenda as regras e estratégias do jogo</p>
            <div class="skirmish-option-status">Disponível</div>
          </div>
        </div>
      </div>
      
      <div class="skirmish-mode-footer">
        <button class="back-button" id="back-to-mode-selection">← Voltar aos Modos</button>
      </div>
    </div>
  </div>

  <!-- Tutorial Screen (initially hidden) -->
  <div class="tutorial-screen" id="tutorial-screen" style="display: none;">
    <div class="tutorial-container">
      <div class="tutorial-header">
        <h1>📚 Tutorial do Jogo</h1>
        <p>Aprenda as regras básicas e estratégias para dominar o mundo!</p>
      </div>
      
      <div class="tutorial-content">
        <!-- Tutorial Section 1: Objetivo do Jogo -->
        <div class="tutorial-section" id="tutorial-section-1">
          <div class="tutorial-section-header">
            <h2>🎯 Objetivo do Jogo</h2>
          </div>
          <div class="tutorial-section-content">
            <div class="tutorial-text">
              <p><strong>Conquiste territórios e domine continentes para vencer!</strong></p>
              <ul>
                <li>🎯 <strong>Objetivo Principal:</strong> Completar seus objetivos para vencer o jogo. Podem ser dominar continentes, eliminar jogadores..</li>
                <li>🗺️ <strong>Mapa:</strong> Mundo dividido em territórios e continentes</li>
                <li>⚔️ <strong>Combate:</strong> Use suas tropas para atacar territórios inimigos</li>
                <li>🏆 <strong>Vitória:</strong> Seja o último sobrevivente ou complete seu objetivo secreto</li>
              </ul>
            </div>
            <div class="tutorial-image">
              <div class="tutorial-placeholder">🗺️</div>
            </div>
          </div>
        </div>

        <!-- Tutorial Section 2: Fases do Turno -->
        <div class="tutorial-section" id="tutorial-section-2" style="display: none;">
          <div class="tutorial-section-header">
            <h2>🔄 Fases do Turno</h2>
          </div>
          <div class="tutorial-section-content">
            <div class="tutorial-text">
              <p><strong>Cada turno tem 3 fases principais:</strong></p>
              <ol>
                <li><strong>🎯 Colocação de Tropas:</strong> Receba tropas base + bônus de continentes</li>
                <li><strong>⚔️ Ataques:</strong> Conquiste territórios inimigos</li>
                <li><strong>🚚 Remanejamento:</strong> Mova tropas entre seus territórios</li>
              </ol>
              <p><em>Dica: Use a fase de remanejamento para fortalecer suas fronteiras!</em></p>
            </div>
            <div class="tutorial-image">
              <div class="tutorial-placeholder">🔄</div>
            </div>
          </div>
        </div>

        <!-- Tutorial Section 3: Cartas Território -->
        <div class="tutorial-section" id="tutorial-section-3" style="display: none;">
          <div class="tutorial-section-header">
            <h2>🃏 Cartas Território</h2>
          </div>
          <div class="tutorial-section-content">
            <div class="tutorial-text">
              <p><strong>As cartas são essenciais para ganhar tropas extras:</strong></p>
              <ul>
                <li>📊 <strong>Coleta:</strong> Ganhe uma carta ao conquistar um território</li>
                <li>🎯 <strong>Combinação:</strong> Troque 3 cartas do mesmo tipo ou 3 diferentes</li>
                <li>⚡ <strong>Bônus:</strong> Cada combinação te dá tropas extras</li>
                <li>⚠️ <strong>Limite:</strong> Máximo de 5 cartas na mão</li>
              </ul>
              <p><em>Estratégia: Guarde cartas para momentos estratégicos!</em></p>
            </div>
            <div class="tutorial-image">
              <div class="tutorial-placeholder">🃏</div>
            </div>
          </div>
        </div>

        <!-- Tutorial Section 4: Estratégias -->
        <div class="tutorial-section" id="tutorial-section-4" style="display: none;">
          <div class="tutorial-section-header">
            <h2>🧠 Estratégias Básicas</h2>
          </div>
          <div class="tutorial-section-content">
            <div class="tutorial-text">
              <p><strong>Dicas para melhorar suas chances de vitória:</strong></p>
              <ul>
                <li>🏔️ <strong>Continentes:</strong> Domine continentes para receber bônus de tropas</li>
                <li>🛡️ <strong>Defesa:</strong> Fortaleça suas fronteiras com tropas extras</li>
                <li>⚔️ <strong>Ataque:</strong> Ataque quando tiver vantagem numérica (2:1 ou melhor)</li>
                <li>🎯 <strong>Foco:</strong> Concentre-se em um objetivo por vez</li>
                <li>🔄 <strong>Flexibilidade:</strong> Adapte sua estratégia conforme o jogo evolui</li>
              </ul>
            </div>
            <div class="tutorial-image">
              <div class="tutorial-placeholder">🧠</div>
            </div>
          </div>
        </div>

        <!-- Tutorial Section 5: Dicas Avançadas -->
        <div class="tutorial-section" id="tutorial-section-5" style="display: none;">
          <div class="tutorial-section-header">
            <h2>🚀 Dicas Avançadas</h2>
          </div>
          <div class="tutorial-section-content">
            <div class="tutorial-text">
              <p><strong>Técnicas para jogadores experientes:</strong></p>
              <ul>
                <li>🎲 <strong>Probabilidade:</strong> Entenda as chances de sucesso nos ataques</li>
                <li>🕐 <strong>Timing:</strong> Ataque no momento certo, não apenas quando possível</li>
                <li>🤝 <strong>Alianças:</strong> Em jogos com mais jogadores, alianças temporárias podem ser úteis</li>
                <li>🗺️ <strong>Posicionamento:</strong> Controle territórios estratégicos (pontos de estrangulamento)</li>
                <li>💎 <strong>Recursos:</strong> Use cartas e bônus de continente de forma eficiente</li>
              </ul>
            </div>
            <div class="tutorial-image">
              <div class="tutorial-placeholder">🚀</div>
            </div>
          </div>
        </div>

        <!-- Tutorial Section 6: Pronto para Jogar -->
        <div class="tutorial-section" id="tutorial-section-6" style="display: none;">
          <div class="tutorial-section-header">
            <h2>🎮 Pronto para Jogar!</h2>
          </div>
          <div class="tutorial-section-content">
            <div class="tutorial-text">
              <p><strong>Parabéns! Você está pronto para conquistar o mundo!</strong></p>
              <ul>
                <li>✅ <strong>Regras Básicas:</strong> Entendidas e prontas para uso</li>
                <li>🎯 <strong>Estratégias:</strong> Conhecidas e prontas para implementar</li>
                <li>🃏 <strong>Cartas:</strong> Sistema compreendido e pronto para uso</li>
                <li>🧠 <strong>Dicas:</strong> Aplicadas para maximizar suas chances</li>
              </ul>
              <p><em>Lembre-se: a prática leva à perfeição! Comece com partidas contra CPUs para testar suas estratégias.</em></p>
            </div>
            <div class="tutorial-image">
              <div class="tutorial-placeholder">🎮</div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="tutorial-navigation">
        <button class="tutorial-nav-btn" id="tutorial-prev" disabled>← Anterior</button>
        
        <div class="tutorial-dots">
          <span class="tutorial-dot active" data-section="1"></span>
          <span class="tutorial-dot" data-section="2"></span>
          <span class="tutorial-dot" data-section="3"></span>
          <span class="tutorial-dot" data-section="4"></span>
          <span class="tutorial-dot" data-section="5"></span>
          <span class="tutorial-dot" data-section="6"></span>
        </div>
        
        <button class="tutorial-nav-btn" id="tutorial-next">Próximo →</button>
      </div>
      
      <div class="tutorial-actions">
        <button class="tutorial-btn secondary" id="tutorial-back">← Voltar ao Skirmish</button>
        <button class="tutorial-btn primary" id="tutorial-start-game">🎮 Começar a Jogar</button>
      </div>
    </div>
  </div>

  <!-- Ranking Popup (initially hidden) -->
  <div class="ranking-popup" id="ranking-popup">
    <div class="ranking-backdrop" id="ranking-backdrop"></div>
    <div class="ranking-container">
      <div class="ranking-header">
        <div class="ranking-icon">🏆</div>
        <h3>Ranking Geral</h3>
        <button class="ranking-close" id="ranking-close">×</button>
      </div>
      
      <div class="ranking-content">
        <div class="ranking-message">
          <p>Esta funcionalidade será implementada em breve!</p>
          <p>Você poderá ver:</p>
          <ul>
            <li>🏅 Top jogadores por vitórias</li>
            <li>📊 Estatísticas de jogos</li>
            <li>🏆 Conquistas e medalhas</li>
            <li>📈 Histórico de partidas</li>
          </ul>
        </div>
      </div>
      
      <div class="ranking-actions">
        <button class="ranking-btn" id="ranking-ok">Entendi</button>
      </div>
    </div>
  </div>

  <!-- Stats Popup (initially hidden) -->
  <div class="stats-popup" id="stats-popup">
    <div class="stats-backdrop" id="stats-backdrop"></div>
    <div class="stats-container">
      <div class="stats-header">
        <div class="stats-icon">📊</div>
        <h3>Minhas Estatísticas</h3>
        <button class="stats-close" id="stats-close">×</button>
      </div>
      
      <div class="stats-content">
        <div class="stats-message">
          <p>Esta funcionalidade será implementada em breve!</p>
          <p>Você poderá ver:</p>
          <ul>
            <li>🎮 Total de partidas jogadas</li>
            <li>📈 Taxa de vitória</li>
            <li>🗺️ Territórios conquistados</li>
            <li>🏅 Conquistas desbloqueadas</li>
          </ul>
        </div>
      </div>
      
      <div class="stats-actions">
        <button class="stats-btn" id="stats-ok">Entendi</button>
      </div>
    </div>
  </div>

  <!-- Lobby Screen (initially hidden) -->
  <div class="lobby-screen" id="lobby-screen" style="display: none;">
    <div class="lobby-container">
      <div class="lobby-header">
        <h1>🎮 Lobby Global</h1>
        <p>Aguardando jogadores se conectarem...</p>
      </div>
      
      <div class="lobby-timer" id="lobby-timer">
        <div class="lobby-timer-label">Tempo Restante</div>
        <div class="lobby-timer-display" id="lobby-timer-display">00:30</div>
      </div>
      
      <div class="lobby-players">
        <div class="lobby-players-title">Jogadores Conectados</div>
        <div class="lobby-players-list" id="lobby-players-list">
          <!-- Players will be added dynamically -->
        </div>
      </div>
      
      <div class="lobby-status">
        <p class="lobby-status-text" id="lobby-status-text">Aguardando mais jogadores...</p>
      </div>
      
      <div class="lobby-footer">
        <p>O jogo iniciará automaticamente em 30 segundos ou quando todos os jogadores se conectarem</p>
      </div>
    </div>
  </div>

  <!-- Game Container (initially hidden) -->
  <div class="game-container" id="game-container" style="display: none;">
    
    <!-- HTML Overlay for Troops -->
    <div id="troops-overlay" class="troops-overlay">
      <!-- Dynamic troop indicators will be created here -->
    </div>
    
    <!-- HTML Overlay for Connections (lines between territories) -->
    <div id="connections-overlay" class="connections-overlay">
      <!-- Dynamic connection lines will be created here -->
    </div>

    <!-- HTML Overlay for Continents -->
    <div id="continents-overlay" class="continents-overlay">
      <!-- Dynamic continent labels will be created here -->
    </div>

    <!-- Turn Confirmation Overlay (HTML) -->
    <div id="turn-confirm-overlay" class="turn-confirm-overlay" style="display:none;"></div>

    <!-- Turn Start Overlay (HTML) -->
    <div id="turn-start-overlay" class="turn-confirm-overlay" style="display:none;"></div>
    
    <div class="game-hud">
    <!-- Top HUD Bar -->
    <div class="hud-top">
      <div class="player-info">
        <div class="player-avatar">👤</div>
        <div class="player-details">
          <div class="player-name" id="player-name">Carregando...</div>
          <div class="player-stats" id="player-stats">Tropas: 0 | Reforço: 0</div>
        </div>
      </div>
      
      <div class="game-instructions">
        <div class="instruction-text" id="instruction-text">Aguardando início do jogo...</div>
      </div>
      
      <div class="game-phase">
        <!-- Turn indicator moved to bottom left corner -->
        <div class="global-turn-timer" id="global-turn-timer">
          <div class="timer-display" id="timer-display">01:30</div>
        </div>
      </div>
      
      <div class="action-buttons">
        <button class="hud-button btn-objective" id="btn-objective">
          <span>🎯</span>
          <span>Objetivo</span>
        </button>
        <button class="hud-button btn-cards" id="btn-cards">
          <span>🎴</span>
          <span>Cartas</span>
        </button>
        <button class="hud-button btn-turn" id="btn-turn">
          <span>⏭️</span>
          <span>Encerrar</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Turn Indicator - Bottom Left (Clickable) -->
  <div class="turn-indicator" id="turn-indicator">
    <div class="turn-circle">
      <div class="turn-marks" id="turn-marks">
        <!-- Turn marks will be added dynamically -->
      </div>
      <div class="turn-pointer" id="turn-pointer"></div>
      <div id="turn-text">Aguardando...</div>
    </div>
  </div>

  <!-- Player Info Panel - Bottom -->
  <div class="player-info-panel" id="player-info-panel">
    <div class="panel-body" id="panel-body">
      <!-- Player info will be added dynamically -->
    </div>
    </div>
  </div>

  <!-- Objective Popup (HTML-based) -->
  <div class="objective-backdrop" id="objective-backdrop"></div>
  <div class="objective-popup" id="objective-popup">
    <div class="objective-header">
      <h3>🎯 Seu Objetivo</h3>
      <button class="objective-close" id="objective-close" aria-label="Fechar">✖</button>
    </div>
    <div class="objective-content">
      <div class="objective-icon" id="objective-icon">🎯</div>
      <div class="objective-description" id="objective-description">Carregando...</div>
      <div class="objective-hint">💡 Dica: Mantenha seu objetivo em mente durante toda a partida!</div>
      <div class="objective-actions">
        <button class="objective-ok" id="objective-ok">✅ Entendi</button>
      </div>
    </div>
  </div>

  <!-- Cards Popup (HTML-based) -->
  <div class="cards-backdrop" id="cards-backdrop"></div>
  <div class="cards-popup" id="cards-popup">
    <div class="cards-header">
      <h3>🎴 Suas Cartas Território</h3>
      <button class="cards-close" id="cards-close" aria-label="Fechar">✖</button>
    </div>
    <div class="cards-content">
      <div class="cards-instructions" id="cards-instructions">Clique nas cartas para selecionar (máximo 3)</div>
      <div class="cards-grid" id="cards-grid"></div>
      <div class="cards-actions">
        <button class="cards-exchange" id="cards-exchange" disabled>🔄 Trocar Cartas</button>
      </div>
    </div>
  </div>

  <!-- Info Popup (HTML-based) -->
  <div class="info-backdrop" id="mode-info-backdrop" style="display:none;"></div>
  <div class="info-popup" id="mode-info-popup" style="display:none;">
    <div class="info-header">
      <h3 id="mode-info-title">Aviso</h3>
      <button class="info-close" id="mode-info-close" aria-label="Fechar">✖</button>
    </div>
    <div class="info-content">
      <div class="info-icon">ℹ️</div>
      <div class="info-message" id="mode-info-message">Mensagem</div>
      <div class="info-actions">
        <button class="info-ok" id="mode-info-ok">OK</button>
      </div>
    </div>
  </div>

  <!-- Server Error Popup (HTML-based) -->
  <div class="info-backdrop" id="server-error-backdrop" style="display:none;"></div>
  <div class="info-popup" id="server-error-popup" style="display:none;">
    <div class="info-header">
      <h3 id="server-error-title">❌ Erro de Conexão</h3>
      <button class="info-close" id="server-error-close" aria-label="Fechar">✖</button>
    </div>
    <div class="info-content">
      <div class="info-icon">🌐</div>
      <div class="info-message" id="server-error-message">Erro ao conectar com o servidor. Tente novamente.</div>
      <div class="info-actions">
        <button class="info-ok" id="server-error-ok">Tentar Novamente</button>
      </div>
    </div>
  </div>

  <!-- Login Validation Error Popup (HTML-based) -->
  <div class="info-backdrop" id="login-error-backdrop" style="display:none;"></div>
  <div class="info-popup" id="login-error-popup" style="display:none;">
    <div class="info-header">
      <h3 id="login-error-title">⚠️ Erro de Validação</h3>
      <button class="info-close" id="login-error-close" aria-label="Fechar">✖</button>
    </div>
    <div class="info-content">
      <div class="info-icon">👤</div>
      <div class="info-message" id="login-error-message">Mensagem de erro</div>
      <div class="info-actions">
        <button class="info-ok" id="login-error-ok">OK</button>
      </div>
    </div>
  </div>

  <!-- Dominium Development Popup (HTML-based) -->
  <div class="info-backdrop" id="dominium-dev-backdrop" style="display:none;"></div>
  <div class="info-popup" id="dominium-dev-popup" style="display:none;">
    <div class="info-header">
      <h3 id="dominium-dev-title">🏰 Modo Dominium</h3>
      <button class="info-close" id="dominium-dev-close" aria-label="Fechar">✖</button>
    </div>
    <div class="info-content">
      <div class="info-icon">🚧</div>
      <div class="info-message" id="dominium-dev-message">Modo Dominium está em desenvolvimento! Este modo incluirá campanhas estratégicas, progressão de jogador, conquistas e recompensas, e modo história. Volte em breve!</div>
      <div class="info-actions">
        <button class="info-ok" id="dominium-dev-ok">Entendi</button>
      </div>
    </div>
  </div>

  <!-- Victory Popup (HTML-based) -->
  <div class="victory-backdrop" id="victory-backdrop"></div>
  <div class="victory-popup" id="victory-popup">
    <div class="victory-header">
      <h3>🏆 Vitória</h3>
      <button class="victory-close" id="victory-close" aria-label="Fechar">✖</button>
    </div>
    <div class="victory-content">
      <div class="victory-header-content">
      <div class="victory-icon">🏆</div>
      <div class="victory-message" id="victory-message">Parabéns! Você venceu!</div>
      <div class="victory-subtitle" id="victory-subtitle"></div>
      </div>
      
      <div class="victory-summary">
        <h4 class="summary-title">📊 Resumo Final do Jogo</h4>
        
        <!-- Estatísticas gerais do jogo -->
        <div class="game-stats" id="game-stats">
          <div class="stat-item">
            <span class="stat-icon">⏱️</span>
            <span class="stat-label">Duração:</span>
            <span class="stat-value" id="game-duration">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">⚔️</span>
            <span class="stat-label">Total de Ataques:</span>
            <span class="stat-value" id="total-attacks">--</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">🌍</span>
            <span class="stat-label">Continentes em Disputa:</span>
            <span class="stat-value" id="continents-count">--</span>
          </div>
        </div>

        <!-- Cards dos jogadores -->
        <div class="players-summary">
          <h5 class="players-title">👥 Resultado dos Jogadores</h5>
          <div class="players-grid" id="players-grid">
            <!-- Os cards dos jogadores serão inseridos aqui dinamicamente -->
          </div>
        </div>

        <!-- Tabela de objetivos -->
        <div class="objectives-summary">
          <h5 class="objectives-title">🎯 Objetivos dos Jogadores</h5>
          <div class="objectives-list" id="objectives-list">
            <!-- Os objetivos serão inseridos aqui dinamicamente -->
          </div>
        </div>
      </div>
      
      <div class="victory-actions">
        <button class="victory-btn secondary" id="victory-menu">🏠 Voltar ao Menu</button>
      </div>
    </div>
  </div>

  <style>
    /* Info Popup Styles */
    .info-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      z-index: 9997;
      display: none;
    }
    .info-popup {
      position: fixed;
      top: 50%; left: 50%; transform: translate(-50%, -50%);
      width: min(480px, 90vw);
      background: #0e0e12;
      border: 1px solid #2a2a35;
      border-radius: 14px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.5);
      z-index: 9998;
      display: none;
      color: #eaeaea;
    }
    .info-header { display: flex; align-items: center; justify-content: space-between; padding: 14px 16px; border-bottom: 1px solid #20202a; }
    .info-header h3 { margin: 0; font-size: 16px; color: #67b7ff; }
    .info-close { background: transparent; border: none; color: #aaa; font-size: 16px; cursor: pointer; }
    .info-close:hover { color: #fff; }
    .info-content { padding: 18px 16px; display: grid; grid-template-columns: 40px 1fr; grid-gap: 12px; align-items: center; }
    .info-icon { font-size: 28px; text-align: center; }
    .info-message { color: #d0d0d5; line-height: 1.45; }
    .info-actions { grid-column: 1 / -1; display: flex; justify-content: flex-end; margin-top: 12px; }
    .info-ok { background: #0077cc; border: none; color: #fff; padding: 10px 16px; border-radius: 10px; cursor: pointer; }
    .info-ok:hover { background: #005fa3; }
  </style>

  <!-- Reinforcement Popup (HTML-based) -->
  <div class="reinforce-backdrop" id="reinforce-backdrop"></div>
  <div class="reinforce-popup" id="reinforce-popup">
    <div class="reinforce-header">
      <div class="reinforce-title" id="reinforce-title">Reforçar Território</div>
      <button class="reinforce-close" id="reinforce-close">✖</button>
    </div>
    <div class="reinforce-content">
      <div class="reinforce-territory">
        <div>🗺️</div>
        <div class="name" id="reinforce-territory-name">-</div>
        <div class="troops" id="reinforce-territory-troops">Tropas: 0</div>
      </div>
      <div class="reinforce-controls">
        <div class="reinforce-label">Quantidade a adicionar</div>
        <div class="reinforce-qty" id="reinforce-qty">0/0</div>
        <div class="reinforce-stepper">
          <button class="reinforce-btn reinforce-minus" id="reinforce-minus">-</button>
          <button class="reinforce-btn reinforce-plus" id="reinforce-plus">+</button>
        </div>
      </div>
      <div class="reinforce-actions">
        <button class="reinforce-btn reinforce-confirm" id="reinforce-confirm">✅ Confirmar</button>
        <button class="reinforce-btn reinforce-cancel" id="reinforce-cancel">❌ Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Transfer Popup (HTML-based) -->
  <div class="transfer-backdrop" id="transfer-backdrop"></div>
  <div class="transfer-popup" id="transfer-popup">
    <div class="transfer-header">
      <div class="transfer-title" id="transfer-title">Transferir Tropas</div>
      <button class="transfer-close" id="transfer-close">✖</button>
    </div>
    <div class="transfer-content">

      <div class="transfer-row">
        <div class="transfer-card">
          <div>📤</div>
          <div class="name" id="transfer-origem">-</div>
          <div class="troops" id="transfer-origem-tropas">Tropas: 0</div>
        </div>
        <div class="transfer-arrow">➡️</div>
        <div class="transfer-card">
          <div>📥</div>
          <div class="name" id="transfer-destino">-</div>
          <div class="troops" id="transfer-destino-tropas">Tropas: 0</div>
        </div>
      </div>
      <div class="transfer-controls">
        <div class="transfer-label">Quantidade para transferir</div>
        <div class="transfer-qty" id="transfer-qty">0/0</div>
        <div class="transfer-stepper">
          <button class="transfer-btn transfer-minus" id="transfer-minus">-</button>
          <button class="transfer-btn transfer-plus" id="transfer-plus">+</button>
        </div>
      </div>
      <div class="transfer-actions">
        <button class="transfer-btn transfer-confirm" id="transfer-confirm">✅ Confirmar</button>
        <button class="transfer-btn transfer-cancel" id="transfer-cancel">❌ Cancelar</button>
      </div>
    </div>
  </div>

  <!-- Remanejamento Popup (HTML-based) -->
  <div class="remanejamento-backdrop" id="remanejamento-backdrop"></div>
  <div class="remanejamento-popup" id="remanejamento-popup">
    <div class="remanejamento-header">
      <div class="remanejamento-icon">🔄</div>
      <div class="remanejamento-title">MOVER TROPAS</div>
      <button class="remanejamento-close" id="remanejamento-close">✖</button>
    </div>
    <div class="remanejamento-content">
      <div class="remanejamento-row">
        <div class="remanejamento-card">
          <div class="remanejamento-territory-icon">📤</div>
          <div class="remanejamento-territory-name" id="remanejamento-origem">-</div>
          <div class="remanejamento-territory-troops" id="remanejamento-origem-tropas">Tropas: 0</div>
        </div>
        <div class="remanejamento-arrow">➡️</div>
        <div class="remanejamento-card">
          <div class="remanejamento-territory-icon">📥</div>
          <div class="remanejamento-territory-name" id="remanejamento-destino">-</div>
          <div class="remanejamento-territory-troops" id="remanejamento-destino-tropas">Tropas: 0</div>
        </div>
      </div>
      <div class="remanejamento-controls">
        <div class="remanejamento-label">Quantidade para mover</div>
        <div class="remanejamento-qty" id="remanejamento-qty">1/0</div>
        <div class="remanejamento-stepper">
          <button class="remanejamento-btn remanejamento-minus" id="remanejamento-minus">−</button>
          <button class="remanejamento-btn remanejamento-plus" id="remanejamento-plus">+</button>
        </div>
      </div>
      <div class="remanejamento-actions">
        <button class="remanejamento-btn remanejamento-confirm" id="remanejamento-confirm">✅ Confirmar</button>
        <button class="remanejamento-btn remanejamento-cancel" id="remanejamento-cancel">❌ Cancelar</button>
      </div>
    </div>
  </div>

  <style>
    /* Ranking and Stats Popup Styles */
    .ranking-popup, .stats-popup {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .ranking-backdrop, .stats-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 2001;
      cursor: pointer;
    }

    .ranking-container, .stats-container {
      position: relative;
      z-index: 2002;
      background: rgba(0, 0, 0, 0.95);
      border: 3px solid #0077cc;
      border-radius: 20px;
      width: min(500px, 90vw);
      max-width: 90vw;
      backdrop-filter: blur(15px);
      box-shadow: 0 15px 40px rgba(0, 119, 204, 0.4);
      animation: popupSlideIn 0.3s ease-out;
    }

    @keyframes popupSlideIn {
      from {
        opacity: 0;
        transform: translateY(-30px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .ranking-header, .stats-header {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 20px 25px;
      background: linear-gradient(135deg, rgba(0,119,204,0.3), rgba(0,119,204,0.1));
      border-bottom: 2px solid #0077cc;
      border-radius: 17px 17px 0 0;
    }

    .ranking-icon, .stats-icon {
      font-size: 32px;
      filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.5));
    }

    .ranking-header h3, .stats-header h3 {
      margin: 0;
      color: white;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
      flex: 1;
    }

    .ranking-close, .stats-close {
      background: none;
      border: none;
      color: #ccc;
      font-size: 24px;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.2s ease;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .ranking-close:hover, .stats-close:hover {
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
      transform: scale(1.1);
    }

    .ranking-content, .stats-content {
      padding: 25px;
      text-align: center;
    }

    .ranking-message, .stats-message {
      color: #fff;
    }

    .ranking-message p, .stats-message p {
      margin: 0 0 15px 0;
      font-size: 16px;
      line-height: 1.5;
    }

    .ranking-message ul, .stats-message ul {
      margin: 0;
      padding: 0;
      list-style: none;
      text-align: left;
      display: inline-block;
    }

    .ranking-message li, .stats-message li {
      margin: 0 0 12px 0;
      font-size: 15px;
      padding: 8px 15px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      border-left: 3px solid #0077cc;
      transition: all 0.2s ease;
    }

    .ranking-message li:hover, .stats-message li:hover {
      background: rgba(255, 255, 255, 0.15);
      transform: translateX(5px);
    }

    .ranking-actions, .stats-actions {
      padding: 20px 25px 25px;
      text-align: center;
      border-top: 1px solid #333;
    }

    .ranking-btn, .stats-btn {
      padding: 12px 30px;
      background: linear-gradient(135deg, #0077cc, #0055aa);
      border: none;
      border-radius: 25px;
      color: white;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 119, 204, 0.4);
      min-width: 120px;
    }

    .ranking-btn:hover, .stats-btn:hover {
      background: linear-gradient(135deg, #0055aa, #004488);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 119, 204, 0.6);
    }

    .ranking-btn:active, .stats-btn:active {
      transform: translateY(0);
    }

    /* Responsive adjustments for ranking and stats popups */
    @media (max-width: 768px) {
      .ranking-container, .stats-container {
        width: 95vw;
        margin: 20px;
      }
      
      .ranking-header, .stats-header {
        padding: 18px 20px;
      }
      
      .ranking-icon, .stats-icon {
        font-size: 28px;
      }
      
      .ranking-header h3, .stats-header h3 {
        font-size: 20px;
      }
      
      .ranking-content, .stats-content {
        padding: 20px;
      }
      
      .ranking-message p, .stats-message p {
        font-size: 15px;
      }
      
      .ranking-message li, .stats-message li {
        font-size: 14px;
        padding: 6px 12px;
      }
      
      .ranking-actions, .stats-actions {
        padding: 18px 20px 20px;
      }
      
      .ranking-btn, .stats-btn {
        padding: 14px 24px;
        font-size: 15px;
        min-width: 100px;
      }
    }

    @media (max-width: 480px) {
      .ranking-container, .stats-container {
        width: 98vw;
        margin: 10px;
      }
      
      .ranking-header, .stats-header {
        padding: 15px 18px;
      }
      
      .ranking-icon, .stats-icon {
        font-size: 24px;
      }
      
      .ranking-header h3, .stats-header h3 {
        font-size: 18px;
      }
      
      .ranking-content, .stats-content {
        padding: 18px;
      }
      
      .ranking-message p, .stats-message p {
        font-size: 14px;
      }
      
      .ranking-message li, .stats-message li {
        font-size: 13px;
        padding: 5px 10px;
      }
      
      .ranking-actions, .stats-actions {
        padding: 15px 18px 18px;
      }
      
      .ranking-btn, .stats-btn {
        padding: 12px 20px;
        font-size: 14px;
        min-width: 90px;
      }
    }

    @media (max-width: 360px) {
      .ranking-container, .stats-container {
        width: 99vw;
        margin: 5px;
      }
      
      .ranking-header, .stats-header {
        padding: 12px 15px;
      }
      
      .ranking-icon, .stats-icon {
        font-size: 20px;
      }
      
      .ranking-header h3, .stats-header h3 {
        font-size: 16px;
      }
      
      .ranking-content, .stats-content {
        padding: 15px;
      }
      
      .ranking-message p, .stats-message p {
        font-size: 13px;
      }
      
      .ranking-message li, .stats-message li {
        font-size: 12px;
        padding: 4px 8px;
      }
      
      .ranking-actions, .stats-actions {
        padding: 12px 15px 15px;
      }
      
      .ranking-btn, .stats-btn {
        padding: 10px 16px;
        font-size: 13px;
        min-width: 80px;
      }
    }
  </style>
</body>
</html>
